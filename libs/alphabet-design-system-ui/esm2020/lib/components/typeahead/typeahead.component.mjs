var ADSFormTypeaheadComponent_1;
import { __decorate, __metadata } from "tslib";
import { CollisionDetectionService, randomId } from '../../utils';
import { DOCUMENT } from '@angular/common';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, EventEmitter, forwardRef, Inject, Input, Output, ViewChild, } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { WINDOW } from '@ng-web-apis/common';
import { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';
import { fromEvent } from 'rxjs';
import { debounceTime, filter } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../utils";
import * as i2 from "@angular/common";
import * as i3 from "../button/button.component";
import * as i4 from "../icon/icon.component";
let ADSFormTypeaheadComponent = ADSFormTypeaheadComponent_1 = class ADSFormTypeaheadComponent {
    constructor(windowRef, document, cdr, collisionDetection) {
        this.windowRef = windowRef;
        this.document = document;
        this.cdr = cdr;
        this.collisionDetection = collisionDetection;
        this.async = 'false';
        this.label = '';
        this.type = 'text';
        this.placeholder = '';
        this.displayNoResults = true;
        this.displaySearchIcon = true;
        this.selectedValue = new EventEmitter();
        this.focusEmitter = new EventEmitter();
        this.blurEmitter = new EventEmitter();
        this.id = `ads-form-typeahead-${randomId()}`;
        this.selectedOption = -1;
        this.expanded = false;
        this.displayNoResultsElement = false;
    }
    onFocus() {
        this.focusEmitter.emit();
    }
    onBlur() {
        this.blurEmitter.emit();
    }
    show() {
        // eslint-disable-next-line functional/immutable-data
        this.expanded = true;
        this.inputElement.setAttribute('aria-expanded', 'true');
        this.typeahead.nativeElement.classList.add('is-expanded');
        this.collisionDetection.detect(this.typeahead.nativeElement, this.optionsElement);
    }
    hide() {
        // eslint-disable-next-line functional/immutable-data
        this.expanded = false;
        this.inputElement.setAttribute('aria-expanded', 'false');
        this.typeahead.nativeElement.classList.remove('is-expanded');
    }
    first() {
        this.deselectOption();
        // eslint-disable-next-line functional/immutable-data
        this.selectedOption = 0;
        this.selectOption();
    }
    last() {
        this.deselectOption();
        // eslint-disable-next-line functional/immutable-data
        this.selectedOption = this.optionsElementItems.length - 1;
        this.selectOption();
    }
    next() {
        this.deselectOption();
        // eslint-disable-next-line functional/immutable-data
        this.selectedOption =
            this.selectedOption + 1 > this.optionsElementItems.length - 1
                ? 0
                : this.selectedOption + 1;
        this.selectOption();
    }
    previous() {
        this.deselectOption();
        // eslint-disable-next-line functional/immutable-data
        this.selectedOption =
            this.selectedOption - 1 < 0
                ? this.optionsElementItems.length - 1
                : this.selectedOption - 1;
        this.selectOption();
    }
    selectOption() {
        const item = this.optionsElementItems[this.selectedOption];
        item?.setAttribute('aria-selected', 'true');
        this.inputElement.setAttribute('aria-activedescendant', item.id);
        this.scrollIntoView();
    }
    deselectOption() {
        const item = this.optionsElementItems[this.selectedOption];
        item?.removeAttribute('aria-selected');
        this.inputElement.removeAttribute('aria-activedescendant');
    }
    emitOption(item) {
        if (item?.dataset['value']) {
            // eslint-disable-next-line functional/immutable-data
            this.inputElement.value = item.dataset['label'] ?? '';
            this.selectedValue.emit(item.dataset['value']);
            this.onChange(this.inputElement.value);
        }
    }
    scrollIntoView() {
        if (this.optionsElementItems.length > 0 && this.selectedOption > -1) {
            this.optionsElementItems[this.selectedOption].scrollIntoView({
                behavior: 'smooth',
                block: 'nearest',
                inline: 'start',
            });
        }
    }
    renderOptions() {
        // eslint-disable-next-line functional/immutable-data
        this.optionsElementItems = Array.from(this.optionsElement.querySelectorAll('li:not([disabled])'));
        const selectableElementItems = Array.from(this.optionsElement.querySelectorAll('li'));
        selectableElementItems.length < 1
            ? this.optionsElement.classList.add('has-no-results')
            : this.optionsElement.classList.remove('has-no-results');
        // eslint-disable-next-line functional/immutable-data
        this.selectedOption = -1;
        selectableElementItems.forEach((item, index) => {
            if (this.inputElement.value &&
                item.outerText.localeCompare(this.inputElement.value) === 0) {
                // eslint-disable-next-line functional/immutable-data
                this.selectedOption = index;
            }
            item.setAttribute('role', 'option');
            item.setAttribute('id', `${this.id}-option-${index}`);
        });
        if (selectableElementItems.length > 0) {
            if (this.selectedOption !== -1) {
                this.selectOption();
            }
            else {
                this.first();
            }
        }
    }
    clearInput() {
        /* eslint-disable */
        this.inputElement.value = '';
        this.displayNoResultsElement = false;
        this.onChange('');
        this.inputElement.blur();
        // Angular needs this :(
        setTimeout(() => this.inputElement.focus(), 0);
        /* eslint-enable */
    }
    ngAfterViewInit() {
        /* eslint-disable */
        this.inputElement = this.typeahead.nativeElement.querySelector(`#${this.id}`);
        this.inputElement = this.typeahead.nativeElement.querySelector(`#${this.id}`);
        this.optionsElement = this.typeahead.nativeElement.querySelector('ul');
        /* eslint-enable */
        this.optionsElement.setAttribute('tabindex', '-1');
        this.optionsElement.setAttribute('id', `${this.id}-list`);
        this.optionsElement.setAttribute('role', 'listbox');
        this.renderOptions();
        fromEvent(this.inputElement, 'keydown')
            .pipe(untilDestroyed(this))
            .subscribe((event) => {
            if (this.optionsElementItems.length > 0 &&
                (this.async === 'false' || this.async === "SUCCESS" /* ADSStatus.SUCCESS */)) {
                if (event.key === "ArrowDown" /* ADSKeyEvents.KEY_ARROW_DOWN */) {
                    event.preventDefault();
                    this.next();
                }
                if (event.key === "ArrowUp" /* ADSKeyEvents.KEY_ARROW_UP */) {
                    event.preventDefault();
                    this.previous();
                }
                if (event.key === "Home" /* ADSKeyEvents.KEY_HOME */) {
                    event.preventDefault();
                    this.first();
                }
                if (event.key === "End" /* ADSKeyEvents.KEY_END */) {
                    event.preventDefault();
                    this.last();
                }
            }
            if (event.key === "Escape" /* ADSKeyEvents.KEY_ESCAPE */) {
                event.preventDefault();
                this.hide();
                this.inputElement.blur();
            }
            if (event.key === "Enter" /* ADSKeyEvents.KEY_ENTER */) {
                event.preventDefault();
                this.emitOption(this.optionsElementItems[this.selectedOption]);
                this.hide();
                this.inputElement.blur();
            }
            if (event.key === "Tab" /* ADSKeyEvents.KEY_TAB */) {
                this.hide();
                this.inputElement.blur();
            }
        });
        fromEvent(this.inputElement, 'keyup')
            .pipe(untilDestroyed(this), debounceTime(200))
            .subscribe((event) => {
            if (event.key !== "ArrowDown" /* ADSKeyEvents.KEY_ARROW_DOWN */ &&
                event.key !== "ArrowUp" /* ADSKeyEvents.KEY_ARROW_UP */ &&
                event.key !== "ArrowLeft" /* ADSKeyEvents.KEY_ARROW_LEFT */ &&
                event.key !== "ArrowRight" /* ADSKeyEvents.KEY_ARROW_RIGHT */ &&
                event.key !== "Home" /* ADSKeyEvents.KEY_HOME */ &&
                event.key !== "End" /* ADSKeyEvents.KEY_END */ &&
                event.key !== "Escape" /* ADSKeyEvents.KEY_ESCAPE */ &&
                event.key !== "Enter" /* ADSKeyEvents.KEY_ENTER */ &&
                event.key !== "Tab" /* ADSKeyEvents.KEY_TAB */) {
                this.deselectOption();
                // eslint-disable-next-line functional/immutable-data
                this.selectedOption = -1;
                this.optionsElement.classList.remove('has-no-results');
                this.onChange(this.inputElement.value);
                if (this.async === 'false') {
                    // Angular needs this :(
                    setTimeout(() => {
                        this.renderOptions();
                        // eslint-disable-next-line functional/immutable-data
                        this.displayNoResultsElement =
                            this.inputElement.value.length > 1 &&
                                this.optionsElementItems.length < 1
                                ? true
                                : false;
                        this.cdr.detectChanges();
                    }, 0);
                }
            }
        });
        fromEvent(this.inputElement, 'focus')
            .pipe(untilDestroyed(this))
            .subscribe(() => {
            this.deselectOption();
            // eslint-disable-next-line functional/immutable-data
            this.selectedOption = -1;
            setTimeout(() => this.show());
            setTimeout(() => this.renderOptions(), 0);
        });
        fromEvent(this.optionsElement, 'click')
            .pipe(untilDestroyed(this), filter(() => this.expanded))
            .subscribe((event) => {
            const target = event.target;
            if (!target.hasAttribute('disabled')) {
                this.emitOption(target);
                this.hide();
            }
            else {
                this.inputElement.focus();
            }
        });
        fromEvent(this.document, 'click')
            .pipe(untilDestroyed(this), filter(() => this.expanded))
            .subscribe((event) => {
            const { target } = event;
            if (target instanceof HTMLElement &&
                !this.typeahead.nativeElement.contains(target)) {
                this.hide();
            }
        });
        fromEvent(this.windowRef, 'resize')
            .pipe(untilDestroyed(this), filter(() => this.expanded))
            .subscribe(() => this.collisionDetection.detect(this.typeahead.nativeElement, this.optionsElement));
    }
    ngOnChanges(changes) {
        const { async } = changes;
        if (async &&
            (async.currentValue === "SUCCESS" /* ADSStatus.SUCCESS */ ||
                async.currentValue === "ERROR" /* ADSStatus.ERROR */ ||
                async.currentValue === "IDLE" /* ADSStatus.IDLE */)) {
            // Angular needs this :(
            setTimeout(() => {
                this.renderOptions();
                // eslint-disable-next-line functional/immutable-data
                this.displayNoResultsElement =
                    this.inputElement.value.length > 1 && this.optionsElementItems.length < 1
                        ? true
                        : false;
                this.cdr.detectChanges();
            }, 0);
        }
    }
    /* eslint-disable @typescript-eslint/no-empty-function, @typescript-eslint/no-explicit-any, functional/immutable-data,
       @typescript-eslint/no-unused-vars */
    onChange(value) { }
    onTouched() { }
    writeValue(value) {
        this.value = value;
        if (this.inputElement) {
            this.inputElement.value = this.value ?? '';
        }
        this.onChange(this.value);
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
};
ADSFormTypeaheadComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.6", ngImport: i0, type: ADSFormTypeaheadComponent, deps: [{ token: WINDOW }, { token: DOCUMENT }, { token: i0.ChangeDetectorRef }, { token: i1.CollisionDetectionService }], target: i0.ɵɵFactoryTarget.Component });
ADSFormTypeaheadComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.6", type: ADSFormTypeaheadComponent, selector: "ads-form-typeahead", inputs: { async: "async", css: "css", hint: "hint", label: "label", type: "type", placeholder: "placeholder", displayNoResults: "displayNoResults", displaySearchIcon: "displaySearchIcon" }, outputs: { selectedValue: "selectedValue", focusEmitter: "focusEmitter", blurEmitter: "blurEmitter" }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            // eslint-disable-next-line @angular-eslint/no-forward-ref
            useExisting: forwardRef(() => ADSFormTypeaheadComponent_1),
            multi: true,
        },
    ], viewQueries: [{ propertyName: "typeahead", first: true, predicate: ["typeahead"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<!-- Typeahead -->\r\n<div #typeahead class=\"ads-typeahead {{ css }}\">\r\n    <label *ngIf=\"label\" for=\"{{ id }}\" class=\"ads-input_label\">\r\n        {{ label }}\r\n    </label>\r\n    <input\r\n        id=\"{{ id }}\"\r\n        name=\"{{ id }}\"\r\n        class=\"ads-input size-small\"\r\n        [type]=\"type\"\r\n        value=\"\"\r\n        autocomplete=\"off\"\r\n        aria-haspopup=\"true\"\r\n        placeholder=\"{{ placeholder }}\"\r\n        attr.aria-owns=\"{{ id }}-list\"\r\n        (focus)=\"onFocus()\"\r\n        (blur)=\"onBlur()\"\r\n    />\r\n    <span *ngIf=\"hint\" class=\"ads-form-hint\">{{ hint }}</span>\r\n    <ads-icon\r\n        *ngIf=\"displaySearchIcon\"\r\n        type=\"search\"\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        class=\"{{ !label ? 'no-label' : '' }}\"\r\n        diameter=\"14\"\r\n    ></ads-icon>\r\n    <ng-content></ng-content>\r\n    <div\r\n        *ngIf=\"displayNoResults && displayNoResultsElement\"\r\n        class=\"my-2 text-color-warm-coral\"\r\n        aria-live=\"polite\"\r\n    >\r\n        <span i18n=\"@@componentTypeaheadNoResultText\" class=\"mr-2\">There are no results</span>\r\n        <ads-button\r\n            id=\"clear-no-result-btn\"\r\n            label=\"Clear\"\r\n            size=\"small\"\r\n            i18n-label=\"@@componentTypeaheadNoResultClearButton\"\r\n            action=\"warm-coral-inverted\"\r\n            icon=\"av_custom_close\"\r\n            iconPosition=\"right\"\r\n            (click)=\"clearInput()\"\r\n        >\r\n        </ads-button>\r\n    </div>\r\n</div>\r\n", styles: [":root{--ads-color-white: #fff;--ads-color-white_foreground: #000;--ads-color-gray-6: #f0f0f0;--ads-color-gray-6_foreground: #000;--ads-color-gray-12: #e0e0e0;--ads-color-gray-12_foreground: #000;--ads-color-gray-20: #cccccc;--ads-color-gray-20_foreground: #000;--ads-color-gray-50: gray;--ads-color-gray-50_foreground: #fff;--ads-color-gray-70: #4d4d4d;--ads-color-gray-70_foreground: #fff;--ads-color-gray-85: #262626;--ads-color-gray-85_foreground: #fff;--ads-color-black: #000;--ads-color-black_foreground: #fff;--ads-color-error: #d21e36;--ads-color-error_hover: #a5182b;--ads-color-error-background: #fceaea;--ads-color-info: #1e236e;--ads-color-info-background: var(--ads-color-gray-6);--ads-color-success: #01964c;--ads-color-success_hover: #016332;--ads-color-success-background: #eaf6eb;--ads-color-warning: #ef7d00;--ads-color-warning-background: #fff7ef;--ads-color-notification: #ffd900;--ads-color-notification-background: #fffdf0;--ads-color-primary: #1e236e;--ads-color-primary-40: #a5a7c5;--ads-color-primary-65: #6e71a2;--ads-color-primary-foreground: #fff;--ads-color-primary_active: #0a0c26;--ads-color-primary_active-foreground: #fff;--ads-color-primary_focus: #0f1136;--ads-color-primary_focus-foreground: #fff;--ads-color-primary_hover: #131646;--ads-color-primary_hover-foreground: #fff;--ads-color-secondary: #00d7e7;--ads-color-secondary-40: #9aeff5;--ads-color-secondary-65: #5ae5ef;--ads-color-secondary-foreground: #fff;--ads-color-secondary_active: #00828b;--ads-color-secondary_active-foreground: #fff;--ads-color-secondary_focus: #0095a0;--ads-color-secondary_focus-foreground: #fff;--ads-color-secondary_hover: #00a8b4;--ads-color-secondary_hover-foreground: #fff;--ads-color-accent: #ff6d6a;--ads-color-accent-40: #ffc5c3;--ads-color-accent-65: #ffa19f;--ads-color-accent-foreground: #fff;--ads-color-accent_active: #ff5451;--ads-color-accent_active-foreground: #fff;--ads-color-accent_hover: #ff3b37;--ads-color-accent_hover-foreground: #fff;--ads-color-accent_focus: #ff221e;--ads-color-accent_focus-foreground: #fff;--ads-color-disabled: #e0e0e0;--ads-color-disabled-foreground: gray;--ads-color-app: #fff;--ads-color-app-text: #262626;--ads-color-app-navigation: #1e236e;--ads-color-app-navigation-divider: #6e71a2;--ads-color-app-navigation-menu-item-foreground: #fff;--ads-color-app-navigation-menu-item-background: #1e236e;--ads-color-app-navigation-menu-item-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-background_hover: #1e236e;--ads-color-app-navigation-menu-item-foreground_focus: #fff;--ads-color-app-navigation-menu-item-background_focus: #fff;--ads-color-app-navigation-menu-item-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-background_selected: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground: #fff;--ads-color-app-navigation-menu-item-icon-background: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_hover: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-menu-item-icon-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_selected: #1e236e;--ads-color-app-navigation-toolbar: #fff;--ads-color-app-navigation-toolbar-divider: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_selected: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_selected: #f0f0f0;--ads-color-solid-gradient-primary-to-accent: linear-gradient(90deg, #1e236e 0%, #ff6d6a 100%);--ads-color-solid-gradient-secondary-to-accent: linear-gradient(-170deg, rgba(0, 215, 231, 0) 60%, #00d7e7 125%), linear-gradient(170deg, #ff6d6a 60%, #ff6d6a 125%);--ads-color-solid-gradient-accent-to-secondary-to-primary: linear-gradient(90deg, #ff6d6a 0%, #00d7e7 50%, #1e236e 100%);--ads-color-solid-gradient-gray-to-primary: linear-gradient(90deg, #e0e0e0 0%, #a5a7c5 100%);--ads-color-image-gradient-primary-to-accent: linear-gradient(90deg, rgba(30, 35, 110, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-primary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(30, 35, 110, .7) 100%);--ads-color-image-gradient-secondary-to-accent: linear-gradient(90deg, rgba(0, 215, 231, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-secondary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(0, 215, 231, .7) 100%);--ads-color-image-gradient-mask: linear-gradient(to bottom, rgba(0,0,0,0) 48%, rgba(0,0,0,.5) 80%, rgba(0,0,0,1) 100%);--ads-color-image-gradient-darken-bottom: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, .1) 40%, rgba(0, 0, 0, .4) 100%);--ads-color-app-gradient-secondary-to-accent: linear-gradient(160deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .4) 90%), linear-gradient(220deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 60%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-large: linear-gradient(170deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .5) 90%), linear-gradient(210deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 70%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-foreground: #fff;--ads-color-app-gradient-primary-to-accent: linear-gradient(200deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .7) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 60%, rgba(30, 35, 110, .4) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-large: linear-gradient(190deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .6) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 70%, rgba(30, 35, 110, .5) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-foreground: #1e236e;--ads-color-app-gradient-primary-inverted: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 60%, rgba(255, 109, 106, .4) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 65%, rgba(0, 215, 231, .45) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-large: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 75%, rgba(255, 109, 106, .05) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 75%, rgba(0, 215, 231, .02) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-foreground: #1e236e;--ads-ring_active: 0 0 0 2px #fff, 0 0 0 5px #1e236e;--ads-ring_focus: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_hover: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_transparent: 0 0 0 2px transparent, 0 0 0 3px transparent;--ads-ring_focus-inset: inset 0 0 0 2px #fff, inset 0 0 0 3px #1e236e;--ads-ring_focus-inset-inverted: inset 0 0 0 2px #1e236e, inset 0 0 0 4px #fff;--ads-ring-focus-with-contextmenu: 0 0 0 1px #fff, 0 0 0 2px #555cd1, 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-0: 0 0 0 0 rgba(0, 0, 0, 0);--ads-shadow-depth-1: 0 .4px .4px rgba(0, 0, 0, .05), 0 1px 1px rgba(0, 0, 0, .036), 0 1.9px 1.9px rgba(0, 0, 0, .03), 0 3.4px 3.4px rgba(0, 0, 0, .025), 0 6.3px 6.3px rgba(0, 0, 0, .02), 0 15px 15px rgba(0, 0, 0, .014);--ads-shadow-depth-2: 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-3: 0 .7px .7px rgba(0, 0, 0, .017), 0 1.7px 1.7px rgba(0, 0, 0, .024), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .036), 0 10.4px 10.4px rgba(0, 0, 0, .043), 0 25px 25px rgba(0, 0, 0, .06);--ads-shadow-depth-4: 0 1px 1px rgba(0, 0, 0, .014), 0 2.3px 2.3px rgba(0, 0, 0, .02), 0 4.4px 4.4px rgba(0, 0, 0, .025), 0 7.8px 7.8px rgba(0, 0, 0, .03), 0 14.6px 14.6px rgba(0, 0, 0, .036), 0 35px 35px rgba(0, 0, 0, .05);--ads-shadow-depth-5: 0 1.2px 1.2px rgba(0, 0, 0, .014), 0 3px 3px rgba(0, 0, 0, .02), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.1px 10.1px rgba(0, 0, 0, .03), 0 18.8px 18.8px rgba(0, 0, 0, .036), 0 45px 45px rgba(0, 0, 0, .05);--ads-shadow-depth-6: 0 .9px .9px rgba(0, 0, 0, .011), 0 1.9px 1.9px rgba(0, 0, 0, .016), 0 3.2px 3.2px rgba(0, 0, 0, .019), 0 4.8px 4.8px rgba(0, 0, 0, .022), 0 6.9px 6.9px rgba(0, 0, 0, .025), 0 9.7px 9.7px rgba(0, 0, 0, .028), 0 13.8px 13.8px rgba(0, 0, 0, .031), 0 20.1px 20.1px rgba(0, 0, 0, .034), 0 30.9px 30.9px rgba(0, 0, 0, .039), 0 55px 55px rgba(0, 0, 0, .05)}:host{display:block}.ads-typeahead{position:relative;z-index:auto;display:block;width:auto;max-width:30rem;padding:0;margin:0}.ads-typeahead.is-expanded ::ng-deep ul{z-index:10;display:block}.ads-typeahead ads-icon{position:absolute;top:2.75rem;right:.75rem}.ads-typeahead ads-icon.no-label{top:1.25rem}.ads-typeahead input.ads-input{padding-right:3rem}.ads-typeahead ::ng-deep ul{position:absolute;top:4rem;right:auto;bottom:auto;left:0;display:none;overflow:hidden;width:100%;min-width:16rem;max-height:20rem;border:1px solid #1e236e;background-color:#fff;border-radius:.25rem;box-shadow:--ads-color-gray-70;outline:0;outline-offset:0;overflow-y:auto}.ads-typeahead ::ng-deep ul.has-no-results{display:none}.ads-typeahead ::ng-deep ul li{display:flex;flex-wrap:wrap;flex-direction:row;width:100%;align-items:center;padding:1rem;border-bottom:1px solid var(--ads-color-gray-70);color:var(--ads-color-primary);font-family:Alphabet sans pro light,sans-serif;font-size:.875rem;font-style:normal;font-weight:400;line-height:1.3;transition:background-color .1s cubic-bezier(.55,.085,.68,.53),color .1s cubic-bezier(.55,.085,.68,.53)}.ads-typeahead ::ng-deep ul li:last-of-type{border-bottom:none}.ads-typeahead ::ng-deep ul li:hover:not([disabled]):not([aria-selected=true]){background-color:var(--ads-color-gray-70);cursor:pointer}.ads-typeahead ::ng-deep ul li[aria-selected=true]{background-color:var(--ads-color-primary);color:var(--ads-color-white)}.ads-typeahead ::ng-deep ul li[disabled]{cursor:not-allowed;color:var(--ads-color-gray-70)}.ads-typeahead ::ng-deep ul li span.has-status-error{color:#d21e36;display:block;width:100%;margin-top:.25rem}.ads-typeahead.place-floating-element-left ::ng-deep ul{right:0;left:auto}.ads-typeahead.place-floating-element-right ::ng-deep ul{right:auto;left:0}.ads-typeahead.place-floating-element-at-top ::ng-deep ul{top:auto;bottom:4.2rem}.ads-typeahead.place-floating-element-at-bottom ::ng-deep ul{top:4.2rem;bottom:auto}input[type=search]::-ms-clear{display:none;width:0;height:0}input[type=search]::-ms-reveal{display:none;width:0;height:0}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}\n"], dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.ADSButtonComponent, selector: "ads-button", inputs: ["color", "css", "disabled", "id", "icon", "iconOnly", "iconPosition", "label", "tooltip", "loading", "loadingLabel", "notification", "size", "tabindex", "type", "ariaControls", "ariaExpanded", "ariaLabelledBy"], outputs: ["clickEmitter"] }, { kind: "component", type: i4.ADSIconComponent, selector: "ads-icon", inputs: ["color", "css", "label", "size", "type"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
ADSFormTypeaheadComponent = ADSFormTypeaheadComponent_1 = __decorate([
    UntilDestroy(),
    __metadata("design:paramtypes", [Window,
        Document,
        ChangeDetectorRef,
        CollisionDetectionService])
], ADSFormTypeaheadComponent);
export { ADSFormTypeaheadComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.6", ngImport: i0, type: ADSFormTypeaheadComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ads-form-typeahead', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            // eslint-disable-next-line @angular-eslint/no-forward-ref
                            useExisting: forwardRef(() => ADSFormTypeaheadComponent),
                            multi: true,
                        },
                    ], changeDetection: ChangeDetectionStrategy.OnPush, template: "<!-- Typeahead -->\r\n<div #typeahead class=\"ads-typeahead {{ css }}\">\r\n    <label *ngIf=\"label\" for=\"{{ id }}\" class=\"ads-input_label\">\r\n        {{ label }}\r\n    </label>\r\n    <input\r\n        id=\"{{ id }}\"\r\n        name=\"{{ id }}\"\r\n        class=\"ads-input size-small\"\r\n        [type]=\"type\"\r\n        value=\"\"\r\n        autocomplete=\"off\"\r\n        aria-haspopup=\"true\"\r\n        placeholder=\"{{ placeholder }}\"\r\n        attr.aria-owns=\"{{ id }}-list\"\r\n        (focus)=\"onFocus()\"\r\n        (blur)=\"onBlur()\"\r\n    />\r\n    <span *ngIf=\"hint\" class=\"ads-form-hint\">{{ hint }}</span>\r\n    <ads-icon\r\n        *ngIf=\"displaySearchIcon\"\r\n        type=\"search\"\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        class=\"{{ !label ? 'no-label' : '' }}\"\r\n        diameter=\"14\"\r\n    ></ads-icon>\r\n    <ng-content></ng-content>\r\n    <div\r\n        *ngIf=\"displayNoResults && displayNoResultsElement\"\r\n        class=\"my-2 text-color-warm-coral\"\r\n        aria-live=\"polite\"\r\n    >\r\n        <span i18n=\"@@componentTypeaheadNoResultText\" class=\"mr-2\">There are no results</span>\r\n        <ads-button\r\n            id=\"clear-no-result-btn\"\r\n            label=\"Clear\"\r\n            size=\"small\"\r\n            i18n-label=\"@@componentTypeaheadNoResultClearButton\"\r\n            action=\"warm-coral-inverted\"\r\n            icon=\"av_custom_close\"\r\n            iconPosition=\"right\"\r\n            (click)=\"clearInput()\"\r\n        >\r\n        </ads-button>\r\n    </div>\r\n</div>\r\n", styles: [":root{--ads-color-white: #fff;--ads-color-white_foreground: #000;--ads-color-gray-6: #f0f0f0;--ads-color-gray-6_foreground: #000;--ads-color-gray-12: #e0e0e0;--ads-color-gray-12_foreground: #000;--ads-color-gray-20: #cccccc;--ads-color-gray-20_foreground: #000;--ads-color-gray-50: gray;--ads-color-gray-50_foreground: #fff;--ads-color-gray-70: #4d4d4d;--ads-color-gray-70_foreground: #fff;--ads-color-gray-85: #262626;--ads-color-gray-85_foreground: #fff;--ads-color-black: #000;--ads-color-black_foreground: #fff;--ads-color-error: #d21e36;--ads-color-error_hover: #a5182b;--ads-color-error-background: #fceaea;--ads-color-info: #1e236e;--ads-color-info-background: var(--ads-color-gray-6);--ads-color-success: #01964c;--ads-color-success_hover: #016332;--ads-color-success-background: #eaf6eb;--ads-color-warning: #ef7d00;--ads-color-warning-background: #fff7ef;--ads-color-notification: #ffd900;--ads-color-notification-background: #fffdf0;--ads-color-primary: #1e236e;--ads-color-primary-40: #a5a7c5;--ads-color-primary-65: #6e71a2;--ads-color-primary-foreground: #fff;--ads-color-primary_active: #0a0c26;--ads-color-primary_active-foreground: #fff;--ads-color-primary_focus: #0f1136;--ads-color-primary_focus-foreground: #fff;--ads-color-primary_hover: #131646;--ads-color-primary_hover-foreground: #fff;--ads-color-secondary: #00d7e7;--ads-color-secondary-40: #9aeff5;--ads-color-secondary-65: #5ae5ef;--ads-color-secondary-foreground: #fff;--ads-color-secondary_active: #00828b;--ads-color-secondary_active-foreground: #fff;--ads-color-secondary_focus: #0095a0;--ads-color-secondary_focus-foreground: #fff;--ads-color-secondary_hover: #00a8b4;--ads-color-secondary_hover-foreground: #fff;--ads-color-accent: #ff6d6a;--ads-color-accent-40: #ffc5c3;--ads-color-accent-65: #ffa19f;--ads-color-accent-foreground: #fff;--ads-color-accent_active: #ff5451;--ads-color-accent_active-foreground: #fff;--ads-color-accent_hover: #ff3b37;--ads-color-accent_hover-foreground: #fff;--ads-color-accent_focus: #ff221e;--ads-color-accent_focus-foreground: #fff;--ads-color-disabled: #e0e0e0;--ads-color-disabled-foreground: gray;--ads-color-app: #fff;--ads-color-app-text: #262626;--ads-color-app-navigation: #1e236e;--ads-color-app-navigation-divider: #6e71a2;--ads-color-app-navigation-menu-item-foreground: #fff;--ads-color-app-navigation-menu-item-background: #1e236e;--ads-color-app-navigation-menu-item-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-background_hover: #1e236e;--ads-color-app-navigation-menu-item-foreground_focus: #fff;--ads-color-app-navigation-menu-item-background_focus: #fff;--ads-color-app-navigation-menu-item-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-background_selected: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground: #fff;--ads-color-app-navigation-menu-item-icon-background: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_hover: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-menu-item-icon-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_selected: #1e236e;--ads-color-app-navigation-toolbar: #fff;--ads-color-app-navigation-toolbar-divider: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_selected: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_selected: #f0f0f0;--ads-color-solid-gradient-primary-to-accent: linear-gradient(90deg, #1e236e 0%, #ff6d6a 100%);--ads-color-solid-gradient-secondary-to-accent: linear-gradient(-170deg, rgba(0, 215, 231, 0) 60%, #00d7e7 125%), linear-gradient(170deg, #ff6d6a 60%, #ff6d6a 125%);--ads-color-solid-gradient-accent-to-secondary-to-primary: linear-gradient(90deg, #ff6d6a 0%, #00d7e7 50%, #1e236e 100%);--ads-color-solid-gradient-gray-to-primary: linear-gradient(90deg, #e0e0e0 0%, #a5a7c5 100%);--ads-color-image-gradient-primary-to-accent: linear-gradient(90deg, rgba(30, 35, 110, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-primary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(30, 35, 110, .7) 100%);--ads-color-image-gradient-secondary-to-accent: linear-gradient(90deg, rgba(0, 215, 231, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-secondary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(0, 215, 231, .7) 100%);--ads-color-image-gradient-mask: linear-gradient(to bottom, rgba(0,0,0,0) 48%, rgba(0,0,0,.5) 80%, rgba(0,0,0,1) 100%);--ads-color-image-gradient-darken-bottom: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, .1) 40%, rgba(0, 0, 0, .4) 100%);--ads-color-app-gradient-secondary-to-accent: linear-gradient(160deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .4) 90%), linear-gradient(220deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 60%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-large: linear-gradient(170deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .5) 90%), linear-gradient(210deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 70%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-foreground: #fff;--ads-color-app-gradient-primary-to-accent: linear-gradient(200deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .7) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 60%, rgba(30, 35, 110, .4) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-large: linear-gradient(190deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .6) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 70%, rgba(30, 35, 110, .5) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-foreground: #1e236e;--ads-color-app-gradient-primary-inverted: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 60%, rgba(255, 109, 106, .4) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 65%, rgba(0, 215, 231, .45) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-large: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 75%, rgba(255, 109, 106, .05) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 75%, rgba(0, 215, 231, .02) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-foreground: #1e236e;--ads-ring_active: 0 0 0 2px #fff, 0 0 0 5px #1e236e;--ads-ring_focus: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_hover: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_transparent: 0 0 0 2px transparent, 0 0 0 3px transparent;--ads-ring_focus-inset: inset 0 0 0 2px #fff, inset 0 0 0 3px #1e236e;--ads-ring_focus-inset-inverted: inset 0 0 0 2px #1e236e, inset 0 0 0 4px #fff;--ads-ring-focus-with-contextmenu: 0 0 0 1px #fff, 0 0 0 2px #555cd1, 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-0: 0 0 0 0 rgba(0, 0, 0, 0);--ads-shadow-depth-1: 0 .4px .4px rgba(0, 0, 0, .05), 0 1px 1px rgba(0, 0, 0, .036), 0 1.9px 1.9px rgba(0, 0, 0, .03), 0 3.4px 3.4px rgba(0, 0, 0, .025), 0 6.3px 6.3px rgba(0, 0, 0, .02), 0 15px 15px rgba(0, 0, 0, .014);--ads-shadow-depth-2: 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-3: 0 .7px .7px rgba(0, 0, 0, .017), 0 1.7px 1.7px rgba(0, 0, 0, .024), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .036), 0 10.4px 10.4px rgba(0, 0, 0, .043), 0 25px 25px rgba(0, 0, 0, .06);--ads-shadow-depth-4: 0 1px 1px rgba(0, 0, 0, .014), 0 2.3px 2.3px rgba(0, 0, 0, .02), 0 4.4px 4.4px rgba(0, 0, 0, .025), 0 7.8px 7.8px rgba(0, 0, 0, .03), 0 14.6px 14.6px rgba(0, 0, 0, .036), 0 35px 35px rgba(0, 0, 0, .05);--ads-shadow-depth-5: 0 1.2px 1.2px rgba(0, 0, 0, .014), 0 3px 3px rgba(0, 0, 0, .02), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.1px 10.1px rgba(0, 0, 0, .03), 0 18.8px 18.8px rgba(0, 0, 0, .036), 0 45px 45px rgba(0, 0, 0, .05);--ads-shadow-depth-6: 0 .9px .9px rgba(0, 0, 0, .011), 0 1.9px 1.9px rgba(0, 0, 0, .016), 0 3.2px 3.2px rgba(0, 0, 0, .019), 0 4.8px 4.8px rgba(0, 0, 0, .022), 0 6.9px 6.9px rgba(0, 0, 0, .025), 0 9.7px 9.7px rgba(0, 0, 0, .028), 0 13.8px 13.8px rgba(0, 0, 0, .031), 0 20.1px 20.1px rgba(0, 0, 0, .034), 0 30.9px 30.9px rgba(0, 0, 0, .039), 0 55px 55px rgba(0, 0, 0, .05)}:host{display:block}.ads-typeahead{position:relative;z-index:auto;display:block;width:auto;max-width:30rem;padding:0;margin:0}.ads-typeahead.is-expanded ::ng-deep ul{z-index:10;display:block}.ads-typeahead ads-icon{position:absolute;top:2.75rem;right:.75rem}.ads-typeahead ads-icon.no-label{top:1.25rem}.ads-typeahead input.ads-input{padding-right:3rem}.ads-typeahead ::ng-deep ul{position:absolute;top:4rem;right:auto;bottom:auto;left:0;display:none;overflow:hidden;width:100%;min-width:16rem;max-height:20rem;border:1px solid #1e236e;background-color:#fff;border-radius:.25rem;box-shadow:--ads-color-gray-70;outline:0;outline-offset:0;overflow-y:auto}.ads-typeahead ::ng-deep ul.has-no-results{display:none}.ads-typeahead ::ng-deep ul li{display:flex;flex-wrap:wrap;flex-direction:row;width:100%;align-items:center;padding:1rem;border-bottom:1px solid var(--ads-color-gray-70);color:var(--ads-color-primary);font-family:Alphabet sans pro light,sans-serif;font-size:.875rem;font-style:normal;font-weight:400;line-height:1.3;transition:background-color .1s cubic-bezier(.55,.085,.68,.53),color .1s cubic-bezier(.55,.085,.68,.53)}.ads-typeahead ::ng-deep ul li:last-of-type{border-bottom:none}.ads-typeahead ::ng-deep ul li:hover:not([disabled]):not([aria-selected=true]){background-color:var(--ads-color-gray-70);cursor:pointer}.ads-typeahead ::ng-deep ul li[aria-selected=true]{background-color:var(--ads-color-primary);color:var(--ads-color-white)}.ads-typeahead ::ng-deep ul li[disabled]{cursor:not-allowed;color:var(--ads-color-gray-70)}.ads-typeahead ::ng-deep ul li span.has-status-error{color:#d21e36;display:block;width:100%;margin-top:.25rem}.ads-typeahead.place-floating-element-left ::ng-deep ul{right:0;left:auto}.ads-typeahead.place-floating-element-right ::ng-deep ul{right:auto;left:0}.ads-typeahead.place-floating-element-at-top ::ng-deep ul{top:auto;bottom:4.2rem}.ads-typeahead.place-floating-element-at-bottom ::ng-deep ul{top:4.2rem;bottom:auto}input[type=search]::-ms-clear{display:none;width:0;height:0}input[type=search]::-ms-reveal{display:none;width:0;height:0}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}\n"] }]
        }], ctorParameters: function () { return [{ type: Window, decorators: [{
                    type: Inject,
                    args: [WINDOW]
                }] }, { type: Document, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }, { type: i0.ChangeDetectorRef }, { type: i1.CollisionDetectionService }]; }, propDecorators: { typeahead: [{
                type: ViewChild,
                args: ['typeahead']
            }], async: [{
                type: Input
            }], css: [{
                type: Input
            }], hint: [{
                type: Input
            }], label: [{
                type: Input
            }], type: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], displayNoResults: [{
                type: Input
            }], displaySearchIcon: [{
                type: Input
            }], selectedValue: [{
                type: Output
            }], focusEmitter: [{
                type: Output
            }], blurEmitter: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZWFoZWFkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvYWxwaGFiZXQtZGVzaWduLXN5c3RlbS11aS9zcmMvbGliL2NvbXBvbmVudHMvdHlwZWFoZWFkL3R5cGVhaGVhZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FscGhhYmV0LWRlc2lnbi1zeXN0ZW0tdWkvc3JjL2xpYi9jb21wb25lbnRzL3R5cGVhaGVhZC90eXBlYWhlYWQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsUUFBUSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMzQyxPQUFPLEVBRUgsdUJBQXVCLEVBQ3ZCLGlCQUFpQixFQUNqQixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixVQUFVLEVBQ1YsTUFBTSxFQUNOLEtBQUssRUFFTCxNQUFNLEVBRU4sU0FBUyxHQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNyRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2pDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7OztBQWlCL0MsSUFBTSx5QkFBeUIsaUNBQS9CLE1BQU0seUJBQXlCO0lBd0JsQyxZQUNxQyxTQUFpQixFQUNmLFFBQWtCLEVBQ3BDLEdBQXNCLEVBQ3RCLGtCQUE2QztRQUg3QixjQUFTLEdBQVQsU0FBUyxD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QU07OzBCQUNiLE1BQU07MkJBQUMsUUFBUTtvSEF6QkksU0FBUztzQkFBaEMsU0FBUzt1QkFBQyxXQUFXO2dCQUNiLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxHQUFHO3NCQUFYLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxJQUFJO3NCQUFaLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csaUJBQWlCO3NCQUF6QixLQUFLO2dCQUNxQixhQUFhO3NCQUF2QyxNQUFNO2dCQUNZLFlBQVk7c0JBQTlCLE1BQU07Z0JBQ1ksV0FBVztzQkFBN0IsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFEU0tleUV2ZW50cywgQURTU3RhdHVzIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25EZXRlY3Rpb25TZXJ2aWNlLCByYW5kb21JZCB9IGZyb20gJy4uLy4uL3V0aWxzJztcclxuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gICAgQWZ0ZXJWaWV3SW5pdCxcclxuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgRXZlbnRFbWl0dGVyLFxyXG4gICAgZm9yd2FyZFJlZixcclxuICAgIEluamVjdCxcclxuICAgIElucHV0LFxyXG4gICAgT25DaGFuZ2VzLFxyXG4gICAgT3V0cHV0LFxyXG4gICAgU2ltcGxlQ2hhbmdlcyxcclxuICAgIFZpZXdDaGlsZCxcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICdAbmctd2ViLWFwaXMvY29tbW9uJztcclxuaW1wb3J0IHsgVW50aWxEZXN0cm95LCB1bnRpbERlc3Ryb3llZCB9IGZyb20gJ0BuZ25lYXQvdW50aWwtZGVzdHJveSc7XHJcbmltcG9ydCB7IGZyb21FdmVudCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbkBVbnRpbERlc3Ryb3koKVxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnYWRzLWZvcm0tdHlwZWFoZWFkJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnLi90eXBlYWhlYWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1mb3J3YXJkLXJlZlxyXG4gICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBRFNGb3JtVHlwZWFoZWFkQ29tcG9uZW50KSxcclxuICAgICAgICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgIF0sXHJcbiAgICBzdHlsZVVybHM6IFsnLi90eXBlYWhlYWQuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQURTRm9ybVR5cGVhaGVhZENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkNoYW5nZXMge1xyXG4gICAgQFZpZXdDaGlsZCgndHlwZWFoZWFkJykgdHlwZWFoZWFkITogRWxlbWVudFJlZjtcclxuICAgIEBJbnB1dCgpIGFzeW5jID0gJ2ZhbHNlJztcclxuICAgIEBJbnB1dCgpIGNzcyE6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIGhpbnQhOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoKSBsYWJlbCA9ICcnO1xyXG4gICAgQElucHV0KCkgdHlwZSA9ICd0ZXh0JztcclxuICAgIEBJbnB1dCgpIHBsYWNlaG9sZGVyID0gJyc7XHJcbiAgICBASW5wdXQoKSBkaXNwbGF5Tm9SZXN1bHRzID0gdHJ1ZTtcclxuICAgIEBJbnB1dCgpIGRpc3BsYXlTZWFyY2hJY29uID0gdHJ1ZTtcclxuICAgIEBPdXRwdXQoKSBwcml2YXRlIHJlYWRvbmx5IHNlbGVjdGVkVmFsdWUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgICBAT3V0cHV0KCkgcmVhZG9ubHkgZm9jdXNFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgQE91dHB1dCgpIHJlYWRvbmx5IGJsdXJFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgcmVhZG9ubHkgaWQgPSBgYWRzLWZvcm0tdHlwZWFoZWFkLSR7cmFuZG9tSWQoKX1gO1xyXG5cclxuICAgIGlucHV0RWxlbWVudCE6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG9wdGlvbnNFbGVtZW50ITogSFRNTFVMaXN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgb3B0aW9uc0VsZW1lbnRJdGVtcyE6IEFycmF5PEhUTUxMSUVsZW1lbnQ+O1xyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0ZWRPcHRpb24gPSAtMTtcclxuICAgIHByaXZhdGUgZXhwYW5kZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdmFsdWUhOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgZGlzcGxheU5vUmVzdWx0c0VsZW1lbnQgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBASW5qZWN0KFdJTkRPVykgcHJpdmF0ZSByZWFkb25seSB3aW5kb3dSZWY6IFdpbmRvdyxcclxuICAgICAgICBASW5qZWN0KERPQ1VNRU5UKSBwcml2YXRlIHJlYWRvbmx5IGRvY3VtZW50OiBEb2N1bWVudCxcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb2xsaXNpb25EZXRlY3Rpb246IENvbGxpc2lvbkRldGVjdGlvblNlcnZpY2UsXHJcbiAgICApIHt9XHJcblxyXG4gICAgb25Gb2N1cygpIHtcclxuICAgICAgICB0aGlzLmZvY3VzRW1pdHRlci5lbWl0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25CbHVyKCkge1xyXG4gICAgICAgIHRoaXMuYmx1ckVtaXR0ZXIuZW1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvdygpOiB2b2lkIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIHRoaXMuZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgdGhpcy50eXBlYWhlYWQubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1leHBhbmRlZCcpO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uRGV0ZWN0aW9uLmRldGVjdCh0aGlzLnR5cGVhaGVhZC5uYXRpdmVFbGVtZW50LCB0aGlzLm9wdGlvbnNFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XHJcbiAgICAgICAgdGhpcy50eXBlYWhlYWQubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1leHBhbmRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmlyc3QoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kZXNlbGVjdE9wdGlvbigpO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxhc3QoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kZXNlbGVjdE9wdGlvbigpO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IHRoaXMub3B0aW9uc0VsZW1lbnRJdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBuZXh0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGVzZWxlY3RPcHRpb24oKTtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uICsgMSA+IHRoaXMub3B0aW9uc0VsZW1lbnRJdGVtcy5sZW5ndGggLSAxXHJcbiAgICAgICAgICAgICAgICA/IDBcclxuICAgICAgICAgICAgICAgIDogdGhpcy5zZWxlY3RlZE9wdGlvbiArIDE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHByZXZpb3VzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGVzZWxlY3RPcHRpb24oKTtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPVxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uIC0gMSA8IDBcclxuICAgICAgICAgICAgICAgID8gdGhpcy5vcHRpb25zRWxlbWVudEl0ZW1zLmxlbmd0aCAtIDFcclxuICAgICAgICAgICAgICAgIDogdGhpcy5zZWxlY3RlZE9wdGlvbiAtIDE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbGVjdE9wdGlvbigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpdGVtOiBIVE1MTElFbGVtZW50IHwgbnVsbCA9IHRoaXMub3B0aW9uc0VsZW1lbnRJdGVtc1t0aGlzLnNlbGVjdGVkT3B0aW9uXTtcclxuICAgICAgICBpdGVtPy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgaXRlbS5pZCk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVzZWxlY3RPcHRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgaXRlbTogSFRNTExJRWxlbWVudCB8IG51bGwgPSB0aGlzLm9wdGlvbnNFbGVtZW50SXRlbXNbdGhpcy5zZWxlY3RlZE9wdGlvbl07XHJcbiAgICAgICAgaXRlbT8ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVtaXRPcHRpb24oaXRlbTogSFRNTExJRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChpdGVtPy5kYXRhc2V0Wyd2YWx1ZSddKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlID0gaXRlbS5kYXRhc2V0WydsYWJlbCddID8/ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFsdWUuZW1pdChpdGVtLmRhdGFzZXRbJ3ZhbHVlJ10pO1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzY3JvbGxJbnRvVmlldygpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zRWxlbWVudEl0ZW1zLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZE9wdGlvbiA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9uc0VsZW1lbnRJdGVtc1t0aGlzLnNlbGVjdGVkT3B0aW9uXS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXHJcbiAgICAgICAgICAgICAgICBibG9jazogJ25lYXJlc3QnLFxyXG4gICAgICAgICAgICAgICAgaW5saW5lOiAnc3RhcnQnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJPcHRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgdGhpcy5vcHRpb25zRWxlbWVudEl0ZW1zID0gQXJyYXkuZnJvbShcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaTpub3QoW2Rpc2FibGVkXSknKSxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3RhYmxlRWxlbWVudEl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnNFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpO1xyXG5cclxuICAgICAgICBzZWxlY3RhYmxlRWxlbWVudEl0ZW1zLmxlbmd0aCA8IDFcclxuICAgICAgICAgICAgPyB0aGlzLm9wdGlvbnNFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hhcy1uby1yZXN1bHRzJylcclxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy1uby1yZXN1bHRzJyk7XHJcblxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IC0xO1xyXG4gICAgICAgIHNlbGVjdGFibGVFbGVtZW50SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgJiZcclxuICAgICAgICAgICAgICAgIGl0ZW0ub3V0ZXJUZXh0LmxvY2FsZUNvbXBhcmUodGhpcy5pbnB1dEVsZW1lbnQudmFsdWUpID09PSAwXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGFcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgncm9sZScsICdvcHRpb24nKTtcclxuICAgICAgICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgYCR7dGhpcy5pZH0tb3B0aW9uLSR7aW5kZXh9YCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RhYmxlRWxlbWVudEl0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFySW5wdXQoKTogdm9pZCB7XHJcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi9cclxuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5vUmVzdWx0c0VsZW1lbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlKCcnKTtcclxuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgLy8gQW5ndWxhciBuZWVkcyB0aGlzIDooXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmlucHV0RWxlbWVudC5mb2N1cygpLCAwKTtcclxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXHJcbiAgICB9XHJcblxyXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXHJcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSB0aGlzLnR5cGVhaGVhZC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuaWR9YCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQgPSB0aGlzLnR5cGVhaGVhZC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuaWR9YCk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zRWxlbWVudCA9IHRoaXMudHlwZWFoZWFkLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKTtcclxuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlICovXHJcblxyXG4gICAgICAgIHRoaXMub3B0aW9uc0VsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xyXG4gICAgICAgIHRoaXMub3B0aW9uc0VsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGAke3RoaXMuaWR9LWxpc3RgKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnNFbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICdsaXN0Ym94Jyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIGZyb21FdmVudDxLZXlib2FyZEV2ZW50Pih0aGlzLmlucHV0RWxlbWVudCwgJ2tleWRvd24nKVxyXG4gICAgICAgICAgICAucGlwZSh1bnRpbERlc3Ryb3llZCh0aGlzKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNFbGVtZW50SXRlbXMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmFzeW5jID09PSAnZmFsc2UnIHx8IHRoaXMuYXN5bmMgPT09IEFEU1N0YXR1cy5TVUNDRVNTKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gQURTS2V5RXZlbnRzLktFWV9BUlJPV19ET1dOKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBBRFNLZXlFdmVudHMuS0VZX0FSUk9XX1VQKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gQURTS2V5RXZlbnRzLktFWV9IT01FKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gQURTS2V5RXZlbnRzLktFWV9FTkQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IEFEU0tleUV2ZW50cy5LRVlfRVNDQVBFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBBRFNLZXlFdmVudHMuS0VZX0VOVEVSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRPcHRpb24odGhpcy5vcHRpb25zRWxlbWVudEl0ZW1zW3RoaXMuc2VsZWN0ZWRPcHRpb25dKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBBRFNLZXlFdmVudHMuS0VZX1RBQikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmJsdXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZyb21FdmVudDxLZXlib2FyZEV2ZW50Pih0aGlzLmlucHV0RWxlbWVudCwgJ2tleXVwJylcclxuICAgICAgICAgICAgLnBpcGUodW50aWxEZXN0cm95ZWQodGhpcyksIGRlYm91bmNlVGltZSgyMDApKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmtleSAhPT0gQURTS2V5RXZlbnRzLktFWV9BUlJPV19ET1dOICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQua2V5ICE9PSBBRFNLZXlFdmVudHMuS0VZX0FSUk9XX1VQICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQua2V5ICE9PSBBRFNLZXlFdmVudHMuS0VZX0FSUk9XX0xFRlQgJiZcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5rZXkgIT09IEFEU0tleUV2ZW50cy5LRVlfQVJST1dfUklHSFQgJiZcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5rZXkgIT09IEFEU0tleUV2ZW50cy5LRVlfSE9NRSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmtleSAhPT0gQURTS2V5RXZlbnRzLktFWV9FTkQgJiZcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5rZXkgIT09IEFEU0tleUV2ZW50cy5LRVlfRVNDQVBFICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQua2V5ICE9PSBBRFNLZXlFdmVudHMuS0VZX0VOVEVSICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQua2V5ICE9PSBBRFNLZXlFdmVudHMuS0VZX1RBQlxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNlbGVjdE9wdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uc0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLW5vLXJlc3VsdHMnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXN5bmMgPT09ICdmYWxzZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW5ndWxhciBuZWVkcyB0aGlzIDooXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5Tm9SZXN1bHRzRWxlbWVudCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUubGVuZ3RoID4gMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uc0VsZW1lbnRJdGVtcy5sZW5ndGggPCAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmcm9tRXZlbnQ8Rm9jdXNFdmVudD4odGhpcy5pbnB1dEVsZW1lbnQsICdmb2N1cycpXHJcbiAgICAgICAgICAgIC5waXBlKHVudGlsRGVzdHJveWVkKHRoaXMpKVxyXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzZWxlY3RPcHRpb24oKTtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jdGlvbmFsL2ltbXV0YWJsZS1kYXRhXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gLTE7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvdygpKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZW5kZXJPcHRpb25zKCksIDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnJvbUV2ZW50PE1vdXNlRXZlbnQ+KHRoaXMub3B0aW9uc0VsZW1lbnQsICdjbGljaycpXHJcbiAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgdW50aWxEZXN0cm95ZWQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIoKCkgPT4gdGhpcy5leHBhbmRlZCksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IDxIVE1MTElFbGVtZW50PmV2ZW50LnRhcmdldDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRPcHRpb24odGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZyb21FdmVudDxNb3VzZUV2ZW50Pih0aGlzLmRvY3VtZW50LCAnY2xpY2snKVxyXG4gICAgICAgICAgICAucGlwZShcclxuICAgICAgICAgICAgICAgIHVudGlsRGVzdHJveWVkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyKCgpID0+IHRoaXMuZXhwYW5kZWQpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy50eXBlYWhlYWQubmF0aXZlRWxlbWVudC5jb250YWlucyh0YXJnZXQpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZyb21FdmVudCh0aGlzLndpbmRvd1JlZiwgJ3Jlc2l6ZScpXHJcbiAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgdW50aWxEZXN0cm95ZWQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIoKCkgPT4gdGhpcy5leHBhbmRlZCksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25EZXRlY3Rpb24uZGV0ZWN0KHRoaXMudHlwZWFoZWFkLm5hdGl2ZUVsZW1lbnQsIHRoaXMub3B0aW9uc0VsZW1lbnQpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGFzeW5jIH0gPSBjaGFuZ2VzO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGFzeW5jICYmXHJcbiAgICAgICAgICAgIChhc3luYy5jdXJyZW50VmFsdWUgPT09IEFEU1N0YXR1cy5TVUNDRVNTIHx8XHJcbiAgICAgICAgICAgICAgICBhc3luYy5jdXJyZW50VmFsdWUgPT09IEFEU1N0YXR1cy5FUlJPUiB8fFxyXG4gICAgICAgICAgICAgICAgYXN5bmMuY3VycmVudFZhbHVlID09PSBBRFNTdGF0dXMuSURMRSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8gQW5ndWxhciBuZWVkcyB0aGlzIDooXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5Tm9SZXN1bHRzRWxlbWVudCA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUubGVuZ3RoID4gMSAmJiB0aGlzLm9wdGlvbnNFbGVtZW50SXRlbXMubGVuZ3RoIDwgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSwgZnVuY3Rpb25hbC9pbW11dGFibGUtZGF0YSxcclxuXHQgICBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cclxuICAgIG9uQ2hhbmdlKHZhbHVlOiBhbnkpOiB2b2lkIHt9XHJcblxyXG4gICAgb25Ub3VjaGVkKCk6IHZvaWQge31cclxuXHJcbiAgICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLmlucHV0RWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMudmFsdWUgPz8gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25DaGFuZ2UodGhpcy52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpIHtcclxuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gICAgfVxyXG4gICAgLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnksIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGEsXHJcblx0ICAgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzICovXHJcbn1cclxuIiwiPCEtLSBUeXBlYWhlYWQgLS0+XHJcbjxkaXYgI3R5cGVhaGVhZCBjbGFzcz1cImFkcy10eXBlYWhlYWQge3sgY3NzIH19XCI+XHJcbiAgICA8bGFiZWwgKm5nSWY9XCJsYWJlbFwiIGZvcj1cInt7IGlkIH19XCIgY2xhc3M9XCJhZHMtaW5wdXRfbGFiZWxcIj5cclxuICAgICAgICB7eyBsYWJlbCB9fVxyXG4gICAgPC9sYWJlbD5cclxuICAgIDxpbnB1dFxyXG4gICAgICAgIGlkPVwie3sgaWQgfX1cIlxyXG4gICAgICAgIG5hbWU9XCJ7eyBpZCB9fVwiXHJcbiAgICAgICAgY2xhc3M9XCJhZHMtaW5wdXQgc2l6ZS1zbWFsbFwiXHJcbiAgICAgICAgW3R5cGVdPVwidHlwZVwiXHJcbiAgICAgICAgdmFsdWU9XCJcIlxyXG4gICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXHJcbiAgICAgICAgYXJpYS1oYXNwb3B1cD1cInRydWVcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwie3sgcGxhY2Vob2xkZXIgfX1cIlxyXG4gICAgICAgIGF0dHIuYXJpYS1vd25zPVwie3sgaWQgfX0tbGlzdFwiXHJcbiAgICAgICAgKGZvY3VzKT1cIm9uRm9jdXMoKVwiXHJcbiAgICAgICAgKGJsdXIpPVwib25CbHVyKClcIlxyXG4gICAgLz5cclxuICAgIDxzcGFuICpuZ0lmPVwiaGludFwiIGNsYXNzPVwiYWRzLWZvcm0taGludFwiPnt7IGhpbnQgfX08L3NwYW4+XHJcbiAgICA8YWRzLWljb25cclxuICAgICAgICAqbmdJZj1cImRpc3BsYXlTZWFyY2hJY29uXCJcclxuICAgICAgICB0eXBlPVwic2VhcmNoXCJcclxuICAgICAgICBjb2xvcj1cInNlY29uZGFyeVwiXHJcbiAgICAgICAgc2l6ZT1cInNtYWxsXCJcclxuICAgICAgICBjbGFzcz1cInt7ICFsYWJlbCA/ICduby1sYWJlbCcgOiAnJyB9fVwiXHJcbiAgICAgICAgZGlhbWV0ZXI9XCIxNFwiXHJcbiAgICA+PC9hZHMtaWNvbj5cclxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cclxuICAgIDxkaXZcclxuICAgICAgICAqbmdJZj1cImRpc3BsYXlOb1Jlc3VsdHMgJiYgZGlzcGxheU5vUmVzdWx0c0VsZW1lbnRcIlxyXG4gICAgICAgIGNsYXNzPVwibXktMiB0ZXh0LWNvbG9yLXdhcm0tY29yYWxcIlxyXG4gICAgICAgIGFyaWEtbGl2ZT1cInBvbGl0ZVwiXHJcbiAgICA+XHJcbiAgICAgICAgPHNwYW4gaTE4bj1cIkBAY29tcG9uZW50VHlwZWFoZWFkTm9SZXN1bHRUZXh0XCIgY2xhc3M9XCJtci0yXCI+VGhlcmUgYXJlIG5vIHJlc3VsdHM8L3NwYW4+XHJcbiAgICAgICAgPGFkcy1idXR0b25cclxuICAgICAgICAgICAgaWQ9XCJjbGVhci1uby1yZXN1bHQtYnRuXCJcclxuICAgICAgICAgICAgbGFiZWw9XCJDbGVhclwiXHJcbiAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXHJcbiAgICAgICAgICAgIGkxOG4tbGFiZWw9XCJAQGNvbXBvbmVudFR5cGVhaGVhZE5vUmVzdWx0Q2xlYXJCdXR0b25cIlxyXG4gICAgICAgICAgICBhY3Rpb249XCJ3YXJtLWNvcmFsLWludmVydGVkXCJcclxuICAgICAgICAgICAgaWNvbj1cImF2X2N1c3RvbV9jbG9zZVwiXHJcbiAgICAgICAgICAgIGljb25Qb3NpdGlvbj1cInJpZ2h0XCJcclxuICAgICAgICAgICAgKGNsaWNrKT1cImNsZWFySW5wdXQoKVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgIDwvYWRzLWJ1dHRvbj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuIl19