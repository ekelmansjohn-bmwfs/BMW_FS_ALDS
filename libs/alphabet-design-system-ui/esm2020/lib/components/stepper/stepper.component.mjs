import { __decorate, __metadata } from "tslib";
/* eslint-disable functional/immutable-data */
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChildren, ElementRef, EventEmitter, Inject, Input, Output, QueryList, ViewChild, } from '@angular/core';
import { WINDOW } from '@ng-web-apis/common';
import { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';
import { fromEvent, Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { randomId } from '../../utils';
import { ADSStepPanelComponent } from '../step-panel/step-panel.component';
import { ADSStepComponent } from '../step/step.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
let ADSStepperComponent = class ADSStepperComponent {
    constructor(windowRef, cdr) {
        this.windowRef = windowRef;
        this.cdr = cdr;
        this.steppperChangeEmitter = new EventEmitter();
        this.selected = -1;
        this.focused = -1;
        this.stepElementsChanged = new Subject();
    }
    focus() {
        this.stepButtonItems[this.focused].focus();
    }
    select(index) {
        this.deselect();
        this.selected = index;
        this.focused = index;
        const angularPanel = this.panels.get(this.selected);
        if (angularPanel) {
            angularPanel.selected = true;
        }
        const button = this.stepButtonItems[this.selected];
        const panel = this.stepPanelItems[this.selected];
        button?.setAttribute('aria-selected', 'true');
        button?.setAttribute('tabindex', '0');
        panel?.removeAttribute('hidden');
        this.setSizes();
        this.steppperChangeEmitter.emit(this.selected);
    }
    deselect() {
        if (this.selected !== -1) {
            const angularPanel = this.panels.get(this.selected);
            if (angularPanel) {
                angularPanel.selected = false;
            }
            if (this.stepButtonItems.length) {
                const button = this.stepButtonItems[this.selected];
                const panel = this.stepPanelItems[this.selected];
                const line = button.parentElement?.nextElementSibling;
                button?.setAttribute('aria-selected', 'false');
                button?.setAttribute('tabindex', '-1');
                panel?.setAttribute('hidden', 'true');
                panel?.removeAttribute('style');
                line?.removeAttribute('style');
            }
        }
    }
    setSizes() {
        let top = 0;
        const button = this.stepButtonItems[this.selected];
        const panel = this.stepPanelItems[this.selected];
        const line = button?.parentElement?.nextSibling;
        if (this.selected > 0 && this.stepButtonItems.length) {
            for (let i = 0; i <= this.selected; i++) {
                if (this.stepButtonItems[i] !== undefined) {
                    top +=
                        this.stepButtonItems[i].getBoundingClientRect().height + (i === 0 ? 0 : 10);
                }
            }
        }
        panel?.setAttribute('style', `top: ${top}px;`);
        line?.setAttribute('style', `height: ${panel?.scrollHeight ?? 0}px`);
    }
    trackByIndex(index) {
        return index;
    }
    ngAfterContentChecked() {
        if (this.stepper) {
            this.setSizes();
        }
    }
    ngOnChanges(changes) {
        const { step } = changes;
        if (step && step.currentValue !== undefined) {
            setTimeout(() => this.select(step.currentValue), 0);
        }
    }
    ngAfterViewInit() {
        this.steps.changes.subscribe(() => this.updateStepElements());
        this.panels.changes.subscribe(() => this.updateStepElements());
        this.updateStepElements();
        fromEvent(this.windowRef, 'resize')
            .pipe(untilDestroyed(this))
            .subscribe(() => this.setSizes());
    }
    updateStepElements() {
        this.cdr.detectChanges();
        // Unsubscribe
        this.stepElementsChanged.next();
        this.stepButtonItems = this.stepper.nativeElement.querySelectorAll('.ads-step_button');
        this.stepPanelItems = this.stepper.nativeElement.querySelectorAll('.ads-step_panel');
        this.stepButtonItems.forEach((button, index) => {
            const id = randomId();
            const selected = button.getAttribute('aria-selected') === 'true';
            const panel = this.stepPanelItems[index];
            button.setAttribute('id', `ads-step-button-${id}-${index}`);
            button.setAttribute('aria-controls', `ads-step-panel-${id}-${index}`);
            button.setAttribute('aria-selected', selected.toString());
            button.setAttribute('tabindex', selected ? '0' : '-1');
            panel?.setAttribute('id', `ads-step-panel-${id}-${index}`);
            panel?.setAttribute('aria-labelledby', `ads-step-button-${id}-${index}`);
            panel?.setAttribute('hidden', 'true');
            if (selected) {
                this.selected = index;
            }
            fromEvent(button, 'click')
                .pipe(untilDestroyed(this), takeUntil(this.stepElementsChanged))
                .subscribe(() => {
                if (this.selected !== index) {
                    button.blur();
                    this.select(index);
                }
            });
            fromEvent(button, 'keydown')
                .pipe(untilDestroyed(this), takeUntil(this.stepElementsChanged))
                .subscribe((event) => {
                if (event.key === "Home" /* ADSKeyEvents.KEY_HOME */) {
                    this.focused = 0;
                    this.focus();
                }
                if (event.key === "End" /* ADSKeyEvents.KEY_END */) {
                    this.focused = this.stepButtonItems.length - 1;
                    this.focus();
                }
                if (event.key === "ArrowLeft" /* ADSKeyEvents.KEY_ARROW_LEFT */) {
                    this.focused =
                        this.focused > 0 ? this.focused - 1 : this.stepButtonItems.length - 1;
                    this.focus();
                }
                if (event.key === "ArrowRight" /* ADSKeyEvents.KEY_ARROW_RIGHT */) {
                    this.focused =
                        this.focused === this.stepButtonItems.length - 1 ? 0 : this.focused + 1;
                    this.focus();
                }
                if (event.key === "Spacebar" /* ADSKeyEvents.KEY_SPACEBAR */) {
                    this.select(this.focused);
                    this.focus();
                }
            });
        });
        this.panels?.forEach(element => {
            element.stepChangeEmitter
                .pipe(untilDestroyed(this), takeUntil(this.stepElementsChanged))
                .subscribe((direction) => {
                this.select(direction === 'next' ? this.selected + 1 : this.selected - 1);
            });
        });
        // initial step
        this.select(this.selected === -1 ? 0 : this.selected);
    }
};
ADSStepperComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.6", ngImport: i0, type: ADSStepperComponent, deps: [{ token: WINDOW }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
ADSStepperComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.6", type: ADSStepperComponent, selector: "ads-stepper", inputs: { css: "css", step: "step" }, outputs: { steppperChangeEmitter: "steppperChangeEmitter" }, queries: [{ propertyName: "steps", predicate: ADSStepComponent }, { propertyName: "panels", predicate: ADSStepPanelComponent }], viewQueries: [{ propertyName: "stepper", first: true, predicate: ["stepper"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div #stepper class=\"ads-stepper {{ css }}\">\r\n    <ol role=\"tablist\">\r\n        <ng-container\r\n            *ngFor=\"let step of steps; trackBy: trackByIndex\"\r\n            [ngTemplateOutlet]=\"step.template\"\r\n        ></ng-container>\r\n    </ol>\r\n    <ng-container\r\n        *ngFor=\"let panel of panels; trackBy: trackByIndex\"\r\n        [ngTemplateOutlet]=\"panel.template\"\r\n    ></ng-container>\r\n</div>\r\n", styles: [":root{--ads-color-white: #fff;--ads-color-white_foreground: #000;--ads-color-gray-6: #f0f0f0;--ads-color-gray-6_foreground: #000;--ads-color-gray-12: #e0e0e0;--ads-color-gray-12_foreground: #000;--ads-color-gray-20: #cccccc;--ads-color-gray-20_foreground: #000;--ads-color-gray-50: gray;--ads-color-gray-50_foreground: #fff;--ads-color-gray-70: #4d4d4d;--ads-color-gray-70_foreground: #fff;--ads-color-gray-85: #262626;--ads-color-gray-85_foreground: #fff;--ads-color-black: #000;--ads-color-black_foreground: #fff;--ads-color-error: #d21e36;--ads-color-error_hover: #a5182b;--ads-color-error-background: #fceaea;--ads-color-info: #1e236e;--ads-color-info-background: var(--ads-color-gray-6);--ads-color-success: #01964c;--ads-color-success_hover: #016332;--ads-color-success-background: #eaf6eb;--ads-color-warning: #ef7d00;--ads-color-warning-background: #fff7ef;--ads-color-notification: #ffd900;--ads-color-notification-background: #fffdf0;--ads-color-primary: #1e236e;--ads-color-primary-40: #a5a7c5;--ads-color-primary-65: #6e71a2;--ads-color-primary-foreground: #fff;--ads-color-primary_active: #0a0c26;--ads-color-primary_active-foreground: #fff;--ads-color-primary_focus: #0f1136;--ads-color-primary_focus-foreground: #fff;--ads-color-primary_hover: #131646;--ads-color-primary_hover-foreground: #fff;--ads-color-secondary: #00d7e7;--ads-color-secondary-40: #9aeff5;--ads-color-secondary-65: #5ae5ef;--ads-color-secondary-foreground: #fff;--ads-color-secondary_active: #00828b;--ads-color-secondary_active-foreground: #fff;--ads-color-secondary_focus: #0095a0;--ads-color-secondary_focus-foreground: #fff;--ads-color-secondary_hover: #00a8b4;--ads-color-secondary_hover-foreground: #fff;--ads-color-accent: #ff6d6a;--ads-color-accent-40: #ffc5c3;--ads-color-accent-65: #ffa19f;--ads-color-accent-foreground: #fff;--ads-color-accent_active: #ff5451;--ads-color-accent_active-foreground: #fff;--ads-color-accent_hover: #ff3b37;--ads-color-accent_hover-foreground: #fff;--ads-color-accent_focus: #ff221e;--ads-color-accent_focus-foreground: #fff;--ads-color-disabled: #e0e0e0;--ads-color-disabled-foreground: gray;--ads-color-app: #fff;--ads-color-app-text: #262626;--ads-color-app-navigation: #1e236e;--ads-color-app-navigation-divider: #6e71a2;--ads-color-app-navigation-menu-item-foreground: #fff;--ads-color-app-navigation-menu-item-background: #1e236e;--ads-color-app-navigation-menu-item-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-background_hover: #1e236e;--ads-color-app-navigation-menu-item-foreground_focus: #fff;--ads-color-app-navigation-menu-item-background_focus: #fff;--ads-color-app-navigation-menu-item-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-background_selected: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground: #fff;--ads-color-app-navigation-menu-item-icon-background: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_hover: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-menu-item-icon-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_selected: #1e236e;--ads-color-app-navigation-toolbar: #fff;--ads-color-app-navigation-toolbar-divider: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_selected: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_selected: #f0f0f0;--ads-color-solid-gradient-primary-to-accent: linear-gradient(90deg, #1e236e 0%, #ff6d6a 100%);--ads-color-solid-gradient-secondary-to-accent: linear-gradient(-170deg, rgba(0, 215, 231, 0) 60%, #00d7e7 125%), linear-gradient(170deg, #ff6d6a 60%, #ff6d6a 125%);--ads-color-solid-gradient-accent-to-secondary-to-primary: linear-gradient(90deg, #ff6d6a 0%, #00d7e7 50%, #1e236e 100%);--ads-color-solid-gradient-gray-to-primary: linear-gradient(90deg, #e0e0e0 0%, #a5a7c5 100%);--ads-color-image-gradient-primary-to-accent: linear-gradient(90deg, rgba(30, 35, 110, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-primary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(30, 35, 110, .7) 100%);--ads-color-image-gradient-secondary-to-accent: linear-gradient(90deg, rgba(0, 215, 231, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-secondary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(0, 215, 231, .7) 100%);--ads-color-image-gradient-mask: linear-gradient(to bottom, rgba(0,0,0,0) 48%, rgba(0,0,0,.5) 80%, rgba(0,0,0,1) 100%);--ads-color-image-gradient-darken-bottom: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, .1) 40%, rgba(0, 0, 0, .4) 100%);--ads-color-app-gradient-secondary-to-accent: linear-gradient(160deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .4) 90%), linear-gradient(220deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 60%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-large: linear-gradient(170deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .5) 90%), linear-gradient(210deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 70%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-foreground: #fff;--ads-color-app-gradient-primary-to-accent: linear-gradient(200deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .7) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 60%, rgba(30, 35, 110, .4) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-large: linear-gradient(190deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .6) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 70%, rgba(30, 35, 110, .5) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-foreground: #1e236e;--ads-color-app-gradient-primary-inverted: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 60%, rgba(255, 109, 106, .4) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 65%, rgba(0, 215, 231, .45) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-large: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 75%, rgba(255, 109, 106, .05) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 75%, rgba(0, 215, 231, .02) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-foreground: #1e236e;--ads-ring_active: 0 0 0 2px #fff, 0 0 0 5px #1e236e;--ads-ring_focus: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_hover: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_transparent: 0 0 0 2px transparent, 0 0 0 3px transparent;--ads-ring_focus-inset: inset 0 0 0 2px #fff, inset 0 0 0 3px #1e236e;--ads-ring_focus-inset-inverted: inset 0 0 0 2px #1e236e, inset 0 0 0 4px #fff;--ads-ring-focus-with-contextmenu: 0 0 0 1px #fff, 0 0 0 2px #555cd1, 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-0: 0 0 0 0 rgba(0, 0, 0, 0);--ads-shadow-depth-1: 0 .4px .4px rgba(0, 0, 0, .05), 0 1px 1px rgba(0, 0, 0, .036), 0 1.9px 1.9px rgba(0, 0, 0, .03), 0 3.4px 3.4px rgba(0, 0, 0, .025), 0 6.3px 6.3px rgba(0, 0, 0, .02), 0 15px 15px rgba(0, 0, 0, .014);--ads-shadow-depth-2: 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-3: 0 .7px .7px rgba(0, 0, 0, .017), 0 1.7px 1.7px rgba(0, 0, 0, .024), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .036), 0 10.4px 10.4px rgba(0, 0, 0, .043), 0 25px 25px rgba(0, 0, 0, .06);--ads-shadow-depth-4: 0 1px 1px rgba(0, 0, 0, .014), 0 2.3px 2.3px rgba(0, 0, 0, .02), 0 4.4px 4.4px rgba(0, 0, 0, .025), 0 7.8px 7.8px rgba(0, 0, 0, .03), 0 14.6px 14.6px rgba(0, 0, 0, .036), 0 35px 35px rgba(0, 0, 0, .05);--ads-shadow-depth-5: 0 1.2px 1.2px rgba(0, 0, 0, .014), 0 3px 3px rgba(0, 0, 0, .02), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.1px 10.1px rgba(0, 0, 0, .03), 0 18.8px 18.8px rgba(0, 0, 0, .036), 0 45px 45px rgba(0, 0, 0, .05);--ads-shadow-depth-6: 0 .9px .9px rgba(0, 0, 0, .011), 0 1.9px 1.9px rgba(0, 0, 0, .016), 0 3.2px 3.2px rgba(0, 0, 0, .019), 0 4.8px 4.8px rgba(0, 0, 0, .022), 0 6.9px 6.9px rgba(0, 0, 0, .025), 0 9.7px 9.7px rgba(0, 0, 0, .028), 0 13.8px 13.8px rgba(0, 0, 0, .031), 0 20.1px 20.1px rgba(0, 0, 0, .034), 0 30.9px 30.9px rgba(0, 0, 0, .039), 0 55px 55px rgba(0, 0, 0, .05)}.ads-stepper{position:relative;z-index:auto;display:flex;display:block;width:100%;flex-direction:column;align-items:flex-start;padding:0;margin:0}.ads-stepper ::ng-deep [role=tablist]{display:flex;width:100%;flex-direction:column;align-items:flex-start;padding:0;margin:0;list-style-type:none}.ads-stepper ::ng-deep [role=tablist] li{width:100%;flex:0 1 auto}.ads-stepper ::ng-deep [role=tablist] li:last-of-type{background-color:transparent}@media (min-width: 1200px){.ads-stepper ::ng-deep [role=tablist]{flex-direction:row;align-items:center;justify-content:center;margin-bottom:2rem}.ads-stepper ::ng-deep [role=tablist] li{width:auto;flex:0 1 auto}}.ads-stepper ::ng-deep [role=tabpanel]:first-of-type .ads-step_panel-button-previous{display:none}.ads-stepper ::ng-deep [role=tabpanel]:last-of-type .ads-step_panel-button-next{display:none}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
ADSStepperComponent = __decorate([
    UntilDestroy(),
    __metadata("design:paramtypes", [Window,
        ChangeDetectorRef])
], ADSStepperComponent);
export { ADSStepperComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.6", ngImport: i0, type: ADSStepperComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ads-stepper', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div #stepper class=\"ads-stepper {{ css }}\">\r\n    <ol role=\"tablist\">\r\n        <ng-container\r\n            *ngFor=\"let step of steps; trackBy: trackByIndex\"\r\n            [ngTemplateOutlet]=\"step.template\"\r\n        ></ng-container>\r\n    </ol>\r\n    <ng-container\r\n        *ngFor=\"let panel of panels; trackBy: trackByIndex\"\r\n        [ngTemplateOutlet]=\"panel.template\"\r\n    ></ng-container>\r\n</div>\r\n", styles: [":root{--ads-color-white: #fff;--ads-color-white_foreground: #000;--ads-color-gray-6: #f0f0f0;--ads-color-gray-6_foreground: #000;--ads-color-gray-12: #e0e0e0;--ads-color-gray-12_foreground: #000;--ads-color-gray-20: #cccccc;--ads-color-gray-20_foreground: #000;--ads-color-gray-50: gray;--ads-color-gray-50_foreground: #fff;--ads-color-gray-70: #4d4d4d;--ads-color-gray-70_foreground: #fff;--ads-color-gray-85: #262626;--ads-color-gray-85_foreground: #fff;--ads-color-black: #000;--ads-color-black_foreground: #fff;--ads-color-error: #d21e36;--ads-color-error_hover: #a5182b;--ads-color-error-background: #fceaea;--ads-color-info: #1e236e;--ads-color-info-background: var(--ads-color-gray-6);--ads-color-success: #01964c;--ads-color-success_hover: #016332;--ads-color-success-background: #eaf6eb;--ads-color-warning: #ef7d00;--ads-color-warning-background: #fff7ef;--ads-color-notification: #ffd900;--ads-color-notification-background: #fffdf0;--ads-color-primary: #1e236e;--ads-color-primary-40: #a5a7c5;--ads-color-primary-65: #6e71a2;--ads-color-primary-foreground: #fff;--ads-color-primary_active: #0a0c26;--ads-color-primary_active-foreground: #fff;--ads-color-primary_focus: #0f1136;--ads-color-primary_focus-foreground: #fff;--ads-color-primary_hover: #131646;--ads-color-primary_hover-foreground: #fff;--ads-color-secondary: #00d7e7;--ads-color-secondary-40: #9aeff5;--ads-color-secondary-65: #5ae5ef;--ads-color-secondary-foreground: #fff;--ads-color-secondary_active: #00828b;--ads-color-secondary_active-foreground: #fff;--ads-color-secondary_focus: #0095a0;--ads-color-secondary_focus-foreground: #fff;--ads-color-secondary_hover: #00a8b4;--ads-color-secondary_hover-foreground: #fff;--ads-color-accent: #ff6d6a;--ads-color-accent-40: #ffc5c3;--ads-color-accent-65: #ffa19f;--ads-color-accent-foreground: #fff;--ads-color-accent_active: #ff5451;--ads-color-accent_active-foreground: #fff;--ads-color-accent_hover: #ff3b37;--ads-color-accent_hover-foreground: #fff;--ads-color-accent_focus: #ff221e;--ads-color-accent_focus-foreground: #fff;--ads-color-disabled: #e0e0e0;--ads-color-disabled-foreground: gray;--ads-color-app: #fff;--ads-color-app-text: #262626;--ads-color-app-navigation: #1e236e;--ads-color-app-navigation-divider: #6e71a2;--ads-color-app-navigation-menu-item-foreground: #fff;--ads-color-app-navigation-menu-item-background: #1e236e;--ads-color-app-navigation-menu-item-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-background_hover: #1e236e;--ads-color-app-navigation-menu-item-foreground_focus: #fff;--ads-color-app-navigation-menu-item-background_focus: #fff;--ads-color-app-navigation-menu-item-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-background_selected: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground: #fff;--ads-color-app-navigation-menu-item-icon-background: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_hover: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_hover: #1e236e;--ads-color-app-navigation-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-menu-item-icon-foreground_selected: #00d7e7;--ads-color-app-navigation-menu-item-icon-background_selected: #1e236e;--ads-color-app-navigation-toolbar: #fff;--ads-color-app-navigation-toolbar-divider: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-background_selected: #e0e0e0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_hover: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_hover: #f0f0f0;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_focus: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_focus: #fff;--ads-color-app-navigation-toolbar-menu-item-icon-foreground_selected: #1e236e;--ads-color-app-navigation-toolbar-menu-item-icon-background_selected: #f0f0f0;--ads-color-solid-gradient-primary-to-accent: linear-gradient(90deg, #1e236e 0%, #ff6d6a 100%);--ads-color-solid-gradient-secondary-to-accent: linear-gradient(-170deg, rgba(0, 215, 231, 0) 60%, #00d7e7 125%), linear-gradient(170deg, #ff6d6a 60%, #ff6d6a 125%);--ads-color-solid-gradient-accent-to-secondary-to-primary: linear-gradient(90deg, #ff6d6a 0%, #00d7e7 50%, #1e236e 100%);--ads-color-solid-gradient-gray-to-primary: linear-gradient(90deg, #e0e0e0 0%, #a5a7c5 100%);--ads-color-image-gradient-primary-to-accent: linear-gradient(90deg, rgba(30, 35, 110, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-primary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(30, 35, 110, .7) 100%);--ads-color-image-gradient-secondary-to-accent: linear-gradient(90deg, rgba(0, 215, 231, .7) 0, rgba(255, 109, 106, .7) 100%);--ads-color-image-gradient-accent-to-secondary: linear-gradient(90deg, rgba(255, 109, 106, .7) 0, rgba(0, 215, 231, .7) 100%);--ads-color-image-gradient-mask: linear-gradient(to bottom, rgba(0,0,0,0) 48%, rgba(0,0,0,.5) 80%, rgba(0,0,0,1) 100%);--ads-color-image-gradient-darken-bottom: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, .1) 40%, rgba(0, 0, 0, .4) 100%);--ads-color-app-gradient-secondary-to-accent: linear-gradient(160deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .4) 90%), linear-gradient(220deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 60%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-large: linear-gradient(170deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .5) 90%), linear-gradient(210deg, rgba(0, 215, 231, .05) 0%, rgba(0, 215, 231, 0) 70%, rgba(0, 215, 231, .6) 90%), linear-gradient(var(--ads-color-primary), var(--ads-color-primary));--ads-color-app-gradient-secondary-to-accent-foreground: #fff;--ads-color-app-gradient-primary-to-accent: linear-gradient(200deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 55%, rgba(255, 109, 106, .7) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 60%, rgba(30, 35, 110, .4) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-large: linear-gradient(190deg, rgba(255, 109, 106, .05) 0%, rgba(255, 109, 106, 0) 65%, rgba(255, 109, 106, .6) 90%), linear-gradient(160deg, rgba(30, 35, 110, .05) 0%, rgba(30, 35, 110, 0) 70%, rgba(30, 35, 110, .5) 90%), linear-gradient(var(--ads-color-secondary), var(--ads-color-secondary-40));--ads-color-app-gradient-primary-to-accent-foreground: #1e236e;--ads-color-app-gradient-primary-inverted: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 60%, rgba(255, 109, 106, .4) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 65%, rgba(0, 215, 231, .45) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-large: linear-gradient(200deg, rgba(255, 109, 106, 0) 0%, rgba(255, 109, 106, 0) 75%, rgba(255, 109, 106, .05) 90%), linear-gradient(160deg, rgba(0, 215, 231, 0) 0%, rgba(0, 215, 231, 0) 75%, rgba(0, 215, 231, .02) 90%), linear-gradient(var(--ads-color-white), var(--ads-color-white));--ads-color-app-gradient-primary-inverted-foreground: #1e236e;--ads-ring_active: 0 0 0 2px #fff, 0 0 0 5px #1e236e;--ads-ring_focus: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_hover: 0 0 0 2px #fff, 0 0 0 4px #1e236e;--ads-ring_transparent: 0 0 0 2px transparent, 0 0 0 3px transparent;--ads-ring_focus-inset: inset 0 0 0 2px #fff, inset 0 0 0 3px #1e236e;--ads-ring_focus-inset-inverted: inset 0 0 0 2px #1e236e, inset 0 0 0 4px #fff;--ads-ring-focus-with-contextmenu: 0 0 0 1px #fff, 0 0 0 2px #555cd1, 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-0: 0 0 0 0 rgba(0, 0, 0, 0);--ads-shadow-depth-1: 0 .4px .4px rgba(0, 0, 0, .05), 0 1px 1px rgba(0, 0, 0, .036), 0 1.9px 1.9px rgba(0, 0, 0, .03), 0 3.4px 3.4px rgba(0, 0, 0, .025), 0 6.3px 6.3px rgba(0, 0, 0, .02), 0 15px 15px rgba(0, 0, 0, .014);--ads-shadow-depth-2: 0 .7px .7px rgba(0, 0, 0, .05), 0 1.7px 1.7px rgba(0, 0, 0, .036), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.4px 10.4px rgba(0, 0, 0, .02), 0 25px 25px rgba(0, 0, 0, .014);--ads-shadow-depth-3: 0 .7px .7px rgba(0, 0, 0, .017), 0 1.7px 1.7px rgba(0, 0, 0, .024), 0 3.1px 3.1px rgba(0, 0, 0, .03), 0 5.6px 5.6px rgba(0, 0, 0, .036), 0 10.4px 10.4px rgba(0, 0, 0, .043), 0 25px 25px rgba(0, 0, 0, .06);--ads-shadow-depth-4: 0 1px 1px rgba(0, 0, 0, .014), 0 2.3px 2.3px rgba(0, 0, 0, .02), 0 4.4px 4.4px rgba(0, 0, 0, .025), 0 7.8px 7.8px rgba(0, 0, 0, .03), 0 14.6px 14.6px rgba(0, 0, 0, .036), 0 35px 35px rgba(0, 0, 0, .05);--ads-shadow-depth-5: 0 1.2px 1.2px rgba(0, 0, 0, .014), 0 3px 3px rgba(0, 0, 0, .02), 0 5.6px 5.6px rgba(0, 0, 0, .025), 0 10.1px 10.1px rgba(0, 0, 0, .03), 0 18.8px 18.8px rgba(0, 0, 0, .036), 0 45px 45px rgba(0, 0, 0, .05);--ads-shadow-depth-6: 0 .9px .9px rgba(0, 0, 0, .011), 0 1.9px 1.9px rgba(0, 0, 0, .016), 0 3.2px 3.2px rgba(0, 0, 0, .019), 0 4.8px 4.8px rgba(0, 0, 0, .022), 0 6.9px 6.9px rgba(0, 0, 0, .025), 0 9.7px 9.7px rgba(0, 0, 0, .028), 0 13.8px 13.8px rgba(0, 0, 0, .031), 0 20.1px 20.1px rgba(0, 0, 0, .034), 0 30.9px 30.9px rgba(0, 0, 0, .039), 0 55px 55px rgba(0, 0, 0, .05)}.ads-stepper{position:relative;z-index:auto;display:flex;display:block;width:100%;flex-direction:column;align-items:flex-start;padding:0;margin:0}.ads-stepper ::ng-deep [role=tablist]{display:flex;width:100%;flex-direction:column;align-items:flex-start;padding:0;margin:0;list-style-type:none}.ads-stepper ::ng-deep [role=tablist] li{width:100%;flex:0 1 auto}.ads-stepper ::ng-deep [role=tablist] li:last-of-type{background-color:transparent}@media (min-width: 1200px){.ads-stepper ::ng-deep [role=tablist]{flex-direction:row;align-items:center;justify-content:center;margin-bottom:2rem}.ads-stepper ::ng-deep [role=tablist] li{width:auto;flex:0 1 auto}}.ads-stepper ::ng-deep [role=tabpanel]:first-of-type .ads-step_panel-button-previous{display:none}.ads-stepper ::ng-deep [role=tabpanel]:last-of-type .ads-step_panel-button-next{display:none}\n"] }]
        }], ctorParameters: function () { return [{ type: Window, decorators: [{
                    type: Inject,
                    args: [WINDOW]
                }] }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { stepper: [{
                type: ViewChild,
                args: ['stepper']
            }], css: [{
                type: Input
            }], step: [{
                type: Input
            }], steppperChangeEmitter: [{
                type: Output
            }], steps: [{
                type: ContentChildren,
                args: [ADSStepComponent]
            }], panels: [{
                type: ContentChildren,
                args: [ADSStepPanelComponent]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RlcHBlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FscGhhYmV0LWRlc2lnbi1zeXN0ZW0tdWkvc3JjL2xpYi9jb21wb25lbnRzL3N0ZXBwZXIvc3RlcHBlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2FscGhhYmV0LWRlc2lnbi1zeXN0ZW0tdWkvc3JjL2xpYi9jb21wb25lbnRzL3N0ZXBwZXIvc3RlcHBlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsOENBQThDO0FBQzlDLE9BQU8sRUFHSCx1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCxlQUFlLEVBQ2YsVUFBVSxFQUNWLFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxFQUVMLE1BQU0sRUFDTixTQUFTLEVBRVQsU0FBUyxHQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QyxPQUFPLEVBQUUsWUFBWSxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzFDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUzQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDOzs7QUFTbkQsSUFBTSxtQkFBbUIsR0FBekIsTUFBTSxtQkFBbUI7SUFjNUIsWUFDcUMsU0FBaUIsRUFDakMsR0FBc0I7UUFETixjQUFTLEdBQVQsU0FBUyxDQUFRO1FBQ2pDLFFBQUcsR0FBSCxHQUFHLENBQW1C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QUFLO3NCQUF2QyxlQUFlO3VCQUFDLGdCQUFnQjtnQkFDTyxNQUFNO3NCQUE3QyxlQUFlO3VCQUFDLHFCQUFxQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGZ1bmN0aW9uYWwvaW1tdXRhYmxlLWRhdGEgKi9cclxuaW1wb3J0IHtcclxuICAgIEFmdGVyQ29udGVudENoZWNrZWQsXHJcbiAgICBBZnRlclZpZXdJbml0LFxyXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIENvbXBvbmVudCxcclxuICAgIENvbnRlbnRDaGlsZHJlbixcclxuICAgIEVsZW1lbnRSZWYsXHJcbiAgICBFdmVudEVtaXR0ZXIsXHJcbiAgICBJbmplY3QsXHJcbiAgICBJbnB1dCxcclxuICAgIE9uQ2hhbmdlcyxcclxuICAgIE91dHB1dCxcclxuICAgIFF1ZXJ5TGlzdCxcclxuICAgIFNpbXBsZUNoYW5nZXMsXHJcbiAgICBWaWV3Q2hpbGQsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFdJTkRPVyB9IGZyb20gJ0BuZy13ZWItYXBpcy9jb21tb24nO1xyXG5pbXBvcnQgeyBVbnRpbERlc3Ryb3ksIHVudGlsRGVzdHJveWVkIH0gZnJvbSAnQG5nbmVhdC91bnRpbC1kZXN0cm95JztcclxuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgQURTS2V5RXZlbnRzIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyByYW5kb21JZCB9IGZyb20gJy4uLy4uL3V0aWxzJztcclxuaW1wb3J0IHsgQURTU3RlcFBhbmVsQ29tcG9uZW50IH0gZnJvbSAnLi4vc3RlcC1wYW5lbC9zdGVwLXBhbmVsLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEFEU1N0ZXBDb21wb25lbnQgfSBmcm9tICcuLi9zdGVwL3N0ZXAuY29tcG9uZW50JztcclxuXHJcbkBVbnRpbERlc3Ryb3koKVxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnYWRzLXN0ZXBwZXInLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL3N0ZXBwZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVVcmxzOiBbJy4vc3RlcHBlci5jb21wb25lbnQuc2NzcyddLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBRFNTdGVwcGVyQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCwgT25DaGFuZ2VzIHtcclxuICAgIEBWaWV3Q2hpbGQoJ3N0ZXBwZXInKSBzdGVwcGVyITogRWxlbWVudFJlZjtcclxuICAgIEBJbnB1dCgpIGNzcyE6IHN0cmluZztcclxuICAgIEBJbnB1dCgpIHN0ZXAhOiBudW1iZXI7XHJcbiAgICBAT3V0cHV0KCkgcmVhZG9ubHkgc3RlcHBwZXJDaGFuZ2VFbWl0dGVyOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gICAgQENvbnRlbnRDaGlsZHJlbihBRFNTdGVwQ29tcG9uZW50KSBzdGVwcyE6IFF1ZXJ5TGlzdDxBRFNTdGVwQ29tcG9uZW50PjtcclxuICAgIEBDb250ZW50Q2hpbGRyZW4oQURTU3RlcFBhbmVsQ29tcG9uZW50KSBwYW5lbHMhOiBRdWVyeUxpc3Q8QURTU3RlcFBhbmVsQ29tcG9uZW50PjtcclxuXHJcbiAgICBwcml2YXRlIHN0ZXBCdXR0b25JdGVtcyE6IEFycmF5PEhUTUxCdXR0b25FbGVtZW50PjtcclxuICAgIHByaXZhdGUgc3RlcFBhbmVsSXRlbXMhOiBBcnJheTxIVE1MRGl2RWxlbWVudD47XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkID0gLTE7XHJcbiAgICBwcml2YXRlIGZvY3VzZWQgPSAtMTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgc3RlcEVsZW1lbnRzQ2hhbmdlZCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgQEluamVjdChXSU5ET1cpIHByaXZhdGUgcmVhZG9ubHkgd2luZG93UmVmOiBXaW5kb3csXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgKSB7fVxyXG5cclxuICAgIHByaXZhdGUgZm9jdXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdGVwQnV0dG9uSXRlbXNbdGhpcy5mb2N1c2VkXS5mb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VsZWN0KGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRlc2VsZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGluZGV4O1xyXG5cclxuICAgICAgICBjb25zdCBhbmd1bGFyUGFuZWwgPSB0aGlzLnBhbmVscy5nZXQodGhpcy5zZWxlY3RlZCk7XHJcbiAgICAgICAgaWYgKGFuZ3VsYXJQYW5lbCkge1xyXG4gICAgICAgICAgICBhbmd1bGFyUGFuZWwuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5zdGVwQnV0dG9uSXRlbXNbdGhpcy5zZWxlY3RlZF07XHJcbiAgICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLnN0ZXBQYW5lbEl0ZW1zW3RoaXMuc2VsZWN0ZWRdO1xyXG5cclxuICAgICAgICBidXR0b24/LnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgYnV0dG9uPy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcclxuICAgICAgICBwYW5lbD8ucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTaXplcygpO1xyXG4gICAgICAgIHRoaXMuc3RlcHBwZXJDaGFuZ2VFbWl0dGVyLmVtaXQodGhpcy5zZWxlY3RlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXNlbGVjdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgYW5ndWxhclBhbmVsID0gdGhpcy5wYW5lbHMuZ2V0KHRoaXMuc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhclBhbmVsKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyUGFuZWwuc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RlcEJ1dHRvbkl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5zdGVwQnV0dG9uSXRlbXNbdGhpcy5zZWxlY3RlZF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMuc3RlcFBhbmVsSXRlbXNbdGhpcy5zZWxlY3RlZF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gYnV0dG9uLnBhcmVudEVsZW1lbnQ/Lm5leHRFbGVtZW50U2libGluZztcclxuXHJcbiAgICAgICAgICAgICAgICBidXR0b24/LnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uPy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XHJcbiAgICAgICAgICAgICAgICBwYW5lbD8uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgcGFuZWw/LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICAgICAgICAgIGxpbmU/LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFNpemVzKCk6IHZvaWQge1xyXG4gICAgICAgIGxldCB0b3AgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLnN0ZXBCdXR0b25JdGVtc1t0aGlzLnNlbGVjdGVkXTtcclxuICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMuc3RlcFBhbmVsSXRlbXNbdGhpcy5zZWxlY3RlZF07XHJcbiAgICAgICAgY29uc3QgbGluZSA9IGJ1dHRvbj8ucGFyZW50RWxlbWVudD8ubmV4dFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQgPiAwICYmIHRoaXMuc3RlcEJ1dHRvbkl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0aGlzLnNlbGVjdGVkOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0ZXBCdXR0b25JdGVtc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcEJ1dHRvbkl0ZW1zW2ldLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCArIChpID09PSAwID8gMCA6IDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGFuZWw/LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgdG9wOiAke3RvcH1weDtgKTtcclxuICAgICAgICBsaW5lPy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYGhlaWdodDogJHtwYW5lbD8uc2Nyb2xsSGVpZ2h0ID8/IDB9cHhgKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFja0J5SW5kZXgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zdGVwcGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2l6ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgc3RlcCB9ID0gY2hhbmdlcztcclxuXHJcbiAgICAgICAgaWYgKHN0ZXAgJiYgc3RlcC5jdXJyZW50VmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VsZWN0KHN0ZXAuY3VycmVudFZhbHVlKSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgICAgICB0aGlzLnN0ZXBzLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHRoaXMudXBkYXRlU3RlcEVsZW1lbnRzKCkpO1xyXG4gICAgICAgIHRoaXMucGFuZWxzLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHRoaXMudXBkYXRlU3RlcEVsZW1lbnRzKCkpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVN0ZXBFbGVtZW50cygpO1xyXG5cclxuICAgICAgICBmcm9tRXZlbnQodGhpcy53aW5kb3dSZWYsICdyZXNpemUnKVxyXG4gICAgICAgICAgICAucGlwZSh1bnRpbERlc3Ryb3llZCh0aGlzKSlcclxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLnNldFNpemVzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlU3RlcEVsZW1lbnRzKCkge1xyXG4gICAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgLy8gVW5zdWJzY3JpYmVcclxuICAgICAgICB0aGlzLnN0ZXBFbGVtZW50c0NoYW5nZWQubmV4dCgpO1xyXG5cclxuICAgICAgICB0aGlzLnN0ZXBCdXR0b25JdGVtcyA9IHRoaXMuc3RlcHBlci5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hZHMtc3RlcF9idXR0b24nKTtcclxuICAgICAgICB0aGlzLnN0ZXBQYW5lbEl0ZW1zID0gdGhpcy5zdGVwcGVyLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFkcy1zdGVwX3BhbmVsJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RlcEJ1dHRvbkl0ZW1zLmZvckVhY2goKGJ1dHRvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSByYW5kb21JZCgpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKSA9PT0gJ3RydWUnO1xyXG4gICAgICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMuc3RlcFBhbmVsSXRlbXNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCBgYWRzLXN0ZXAtYnV0dG9uLSR7aWR9LSR7aW5kZXh9YCk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCBgYWRzLXN0ZXAtcGFuZWwtJHtpZH0tJHtpbmRleH1gKTtcclxuICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsIHNlbGVjdGVkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIHNlbGVjdGVkID8gJzAnIDogJy0xJyk7XHJcblxyXG4gICAgICAgICAgICBwYW5lbD8uc2V0QXR0cmlidXRlKCdpZCcsIGBhZHMtc3RlcC1wYW5lbC0ke2lkfS0ke2luZGV4fWApO1xyXG4gICAgICAgICAgICBwYW5lbD8uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsbGVkYnknLCBgYWRzLXN0ZXAtYnV0dG9uLSR7aWR9LSR7aW5kZXh9YCk7XHJcbiAgICAgICAgICAgIHBhbmVsPy5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJvbUV2ZW50PE1vdXNlRXZlbnQ+KGJ1dHRvbiwgJ2NsaWNrJylcclxuICAgICAgICAgICAgICAgIC5waXBlKHVudGlsRGVzdHJveWVkKHRoaXMpLCB0YWtlVW50aWwodGhpcy5zdGVwRWxlbWVudHNDaGFuZ2VkKSlcclxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkICE9PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uYmx1cigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmcm9tRXZlbnQ8S2V5Ym9hcmRFdmVudD4oYnV0dG9uLCAna2V5ZG93bicpXHJcbiAgICAgICAgICAgICAgICAucGlwZSh1bnRpbERlc3Ryb3llZCh0aGlzKSwgdGFrZVVudGlsKHRoaXMuc3RlcEVsZW1lbnRzQ2hhbmdlZCkpXHJcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IEFEU0tleUV2ZW50cy5LRVlfSE9NRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBBRFNLZXlFdmVudHMuS0VZX0VORCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSB0aGlzLnN0ZXBCdXR0b25JdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBBRFNLZXlFdmVudHMuS0VZX0FSUk9XX0xFRlQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZCA+IDAgPyB0aGlzLmZvY3VzZWQgLSAxIDogdGhpcy5zdGVwQnV0dG9uSXRlbXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gQURTS2V5RXZlbnRzLktFWV9BUlJPV19SSUdIVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzZWQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkID09PSB0aGlzLnN0ZXBCdXR0b25JdGVtcy5sZW5ndGggLSAxID8gMCA6IHRoaXMuZm9jdXNlZCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IEFEU0tleUV2ZW50cy5LRVlfU1BBQ0VCQVIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5mb2N1c2VkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBhbmVscz8uZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdGVwQ2hhbmdlRW1pdHRlclxyXG4gICAgICAgICAgICAgICAgLnBpcGUodW50aWxEZXN0cm95ZWQodGhpcyksIHRha2VVbnRpbCh0aGlzLnN0ZXBFbGVtZW50c0NoYW5nZWQpKVxyXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoZGlyZWN0aW9uOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChkaXJlY3Rpb24gPT09ICduZXh0JyA/IHRoaXMuc2VsZWN0ZWQgKyAxIDogdGhpcy5zZWxlY3RlZCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGluaXRpYWwgc3RlcFxyXG4gICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWQgPT09IC0xID8gMCA6IHRoaXMuc2VsZWN0ZWQpO1xyXG4gICAgfVxyXG59XHJcbiIsIjxkaXYgI3N0ZXBwZXIgY2xhc3M9XCJhZHMtc3RlcHBlciB7eyBjc3MgfX1cIj5cclxuICAgIDxvbCByb2xlPVwidGFibGlzdFwiPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IHN0ZXAgb2Ygc3RlcHM7IHRyYWNrQnk6IHRyYWNrQnlJbmRleFwiXHJcbiAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInN0ZXAudGVtcGxhdGVcIlxyXG4gICAgICAgID48L25nLWNvbnRhaW5lcj5cclxuICAgIDwvb2w+XHJcbiAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgKm5nRm9yPVwibGV0IHBhbmVsIG9mIHBhbmVsczsgdHJhY2tCeTogdHJhY2tCeUluZGV4XCJcclxuICAgICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJwYW5lbC50ZW1wbGF0ZVwiXHJcbiAgICA+PC9uZy1jb250YWluZXI+XHJcbjwvZGl2PlxyXG4iXX0=